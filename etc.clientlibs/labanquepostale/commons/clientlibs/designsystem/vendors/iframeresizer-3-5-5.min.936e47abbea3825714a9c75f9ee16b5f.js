(function(c){function q(a,b,d){"addEventListener"in c?a.addEventListener(b,d,!1):"attachEvent"in c&&a.attachEvent("on"+b,d)}function R(a,b,d){"removeEventListener"in c?a.removeEventListener(b,d,!1):"detachEvent"in c&&a.detachEvent("on"+b,d)}function S(){var a=["moz","webkit","o","ms"],b;for(b=0;b<a.length&&!r;b+=1)r=c[a[b]+"RequestAnimationFrame"];r||h("setup","RequestAnimationFrame not supported")}function T(a){var b="Host page: "+a;c.top!==c.self&&(b=c.parentIFrame&&c.parentIFrame.getId?c.parentIFrame.getId()+
": "+a:"Nested host page: "+a);return b}function B(a){return b[a]?b[a].log:C}function h(a,b){x("log",a,b,B(a))}function y(a,b){x("warn",a,b,!0)}function x(a,b,d,f){if(!0===f&&"object"===typeof c.console)console[a]("[iFrameSizer]["+T(b)+"]",d)}function U(a){function m(){f("Height");f("Width");F(function(){G(k);H(e)},k,"init")}function d(){var a=n.substr(13).split(":");return{iframe:b[a[0]].iframe,id:a[0],height:a[1],width:a[2],type:a[3]}}function f(a){var f=Number(b[e]["max"+a]),d=Number(b[e]["min"+
a]);a=a.toLowerCase();var z=Number(k[a]);h(e,"Checking "+a+" is in range "+d+"-"+f);z<d&&(z=d,h(e,"Set "+a+" to min value"));z>f&&(z=f,h(e,"Set "+a+" to max value"));k[a]=""+z}function V(){function f(){function a(){var a=0,b=!1;for(h(e,"Checking connection is from allowed list of origins: "+c);a<c.length;a++)if(c[a]===d){b=!0;break}return b}function f(){var a=b[e].remoteHost;h(e,"Checking connection is from: "+a);return d===a}return c.constructor===Array?a():f()}var d=a.origin,c=b[e].checkOrigin;
if(c&&"null"!==""+d&&!f())throw Error("Unexpected message received from: "+d+" for "+k.iframe.id+". Message was: "+a.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}function r(){var a=k.type in{"true":1,"false":1,undefined:1};a&&h(e,"Ignoring init message from meta parent page");return a}function g(a){h(e,"MessageCallback passed: {iframe: "+k.iframe.id+", message: "+a+"}");a={iframe:k.iframe,message:JSON.parse(a)};
u(e,"messageCallback",a);h(e,"--")}function I(a,b){D(function(){var f=p;var d=document.body.getBoundingClientRect();var e=k.iframe.getBoundingClientRect();d=JSON.stringify({iframeHeight:e.height,iframeWidth:e.width,clientHeight:Math.max(document.documentElement.clientHeight,c.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,c.innerWidth||0),offsetTop:parseInt(e.top-d.top,10),offsetLeft:parseInt(e.left-d.left,10),scrollTop:c.pageYOffset,scrollLeft:c.pageXOffset});f("Send Page Info",
"pageInfo:"+d,a,b)},32)}function W(){function a(a,e){function m(){b[d]?I(b[d].iframe,d):f()}["scroll","resize"].forEach(function(b){h(d,a+b+" listener for sendPageInfo");e(c,b,m)})}function f(){a("Remove ",R)}var d=e;a("Add ",q);b[d].stopPageInfo=f}function X(){var a=!0;null===k.iframe&&(y(e,"IFrame ("+k.id+") not found"),a=!1);return a}function t(a){a=a.getBoundingClientRect();J(e);return{x:Math.floor(Number(a.left)+Number(l.x)),y:Math.floor(Number(a.top)+Number(l.y))}}function v(a){var b=a?t(k.iframe):
{x:0,y:0},d={x:Number(k.width)+b.x,y:Number(k.height)+b.y};h(e,"Reposition requested from iFrame (offset x:"+b.x+" y:"+b.y+")");if(c.top!==c.self)if(c.parentIFrame)c.parentIFrame["scrollTo"+(a?"Offset":"")](d.x,d.y);else y(e,"Unable to scroll to requested position, window.parentIFrame not found");else l=d,w(),h(e,"--")}function w(){!1!==u(e,"scrollCallback",l)?H(e):l=null}function A(a){a=a.split("#")[1]||"";var b=decodeURIComponent(a);(b=document.getElementById(b)||document.getElementsByName(b)[0])?
(b=t(b),h(e,"Moving to in page link (#"+a+") at x: "+b.x+" y: "+b.y),l={x:b.x,y:b.y},w(),h(e,"--")):c.top!==c.self?c.parentIFrame?c.parentIFrame.moveToAnchor(a):h(e,"In page link #"+a+" not found and window.parentIFrame not found"):h(e,"In page link #"+a+" not found")}function C(a){var d=!0;b[a]||(d=!1,y(k.type+" No settings for "+a+". Message was: "+n));return d}function E(){for(var a in b)p("iFrame requested init",K(a),document.getElementById(a),a)}var n=a.data,k={},e=null;if("[iFrameResizerChild]Ready"===
n)E();else if("[iFrameSizer]"===(""+n).substr(0,13)&&n.substr(13).split(":")[0]in b){if(k=d(),e=k.id,!r()&&C(e)&&(h(e,"Received: "+n),X()&&V()))switch(b[e].firstRun&&(b[e].firstRun=!1),k.type){case "close":L(k.iframe);break;case "message":g(n.substr(n.indexOf(":")+7+6));break;case "scrollTo":v(!1);break;case "scrollToOffset":v(!0);break;case "pageInfo":I(b[e].iframe,e);W();break;case "pageInfoStop":b[e]&&b[e].stopPageInfo&&(b[e].stopPageInfo(),delete b[e].stopPageInfo);break;case "inPageLink":A(n.substr(n.indexOf(":")+
7+9));break;case "reset":M(k);break;case "init":m();u(e,"initCallback",k.iframe);u(e,"resizedCallback",k);break;default:m(),u(e,"resizedCallback",k)}}else x("info",e,"Ignored: "+n,B(e))}function u(a,c,d){var f=null;if(b[a])if(f=b[a][c],"function"===typeof f)f=f(d);else throw new TypeError(c+" on iFrame["+a+"] is not a function");return f}function L(a){var c=a.id;h(c,"Removing iFrame: "+c);a.parentNode.removeChild(a);u(c,"closedCallback",c);h(c,"--");delete b[c]}function J(a){null===l&&(l={x:void 0!==
c.pageXOffset?c.pageXOffset:document.documentElement.scrollLeft,y:void 0!==c.pageYOffset?c.pageYOffset:document.documentElement.scrollTop},h(a,"Get page position: "+l.x+","+l.y))}function H(a){null!==l&&(c.scrollTo(l.x,l.y),h(a,"Set page position: "+l.x+","+l.y),l=null)}function M(a){h(a.id,"Size reset requested by "+("init"===a.type?"host page":"iFrame"));J(a.id);F(function(){G(a);p("reset","reset",a.iframe,a.id)},a,"reset")}function G(a){function c(b){a.iframe.style[b]=a[b]+"px";h(a.id,"IFrame ("+
d+") "+b+" set to "+a[b]+"px");E||"0"!==a[b]||(E=!0,h(d,"Hidden iFrame detected, creating visibility listener"),Y())}var d=a.iframe.id;b[d]&&(b[d].sizeHeight&&c("height"),b[d].sizeWidth&&c("width"))}function F(a,b,d){d!==b.type&&r?(h(b.id,"Requesting animation frame"),r(a)):a()}function p(a,c,d,f){f=f||d.id;if(b[f])if(d&&"contentWindow"in d&&null!==d.contentWindow){var m=b[f].targetOrigin;h(f,"["+a+"] Sending msg to iframe["+f+"] ("+c+") targetOrigin: "+m);d.contentWindow.postMessage("[iFrameSizer]"+
c,m)}else x("info",f,"["+a+"] IFrame("+f+") not found",B(f)),b[f]&&delete b[f]}function K(a){return a+":"+b[a].bodyMarginV1+":"+b[a].sizeWidth+":"+b[a].log+":"+b[a].interval+":"+b[a].enablePublicMethods+":"+b[a].autoResize+":"+b[a].bodyMargin+":"+b[a].heightCalculationMethod+":"+b[a].bodyBackground+":"+b[a].bodyPadding+":"+b[a].tolerance+":"+b[a].inPageLinks+":"+b[a].resizeFrom+":"+b[a].widthCalculationMethod}function N(a,c){function d(){function d(d){Infinity!==b[g][d]&&0!==b[g][d]&&(a.style[d]=
b[g][d]+"px",h(g,"Set "+d+" \x3d "+b[g][d]+"px"))}function c(a){if(b[g]["min"+a]>b[g]["max"+a])throw Error("Value for min"+a+" can not be greater than max"+a);}c("Height");c("Width");d("maxHeight");d("minHeight");d("maxWidth");d("minWidth")}function f(){Function.prototype.bind&&(b[g].iframe.iFrameResizer={close:L.bind(null,b[g].iframe),resize:p.bind(null,"Window resize","resize",b[g].iframe),moveToAnchor:function(a){p("Move to anchor","moveToAnchor:"+a,b[g].iframe,g)},sendMessage:function(a){a=JSON.stringify(a);
p("Send Message","message:"+a,b[g].iframe,g)}})}function m(d){q(a,"load",function(){p("iFrame.onload",d,a);var c=b[g].heightCalculationMethod in Z;!b[g].firstRun&&c&&M({iframe:a,height:0,width:0,type:"init"})});p("init",d,a)}function l(d){d=d||{};b[g]={firstRun:!0,iframe:a,remoteHost:a.src.split("/").slice(0,3).join("/")};if("object"!==typeof d)throw new TypeError("Options is not an object");for(var c in t)t.hasOwnProperty(c)&&(b[g][c]=d.hasOwnProperty(c)?d[c]:t[c]);c=b[g];!0===b[g].checkOrigin?(d=
b[g].remoteHost,d=""===d||"file://"===d?"*":d):d="*";c.targetOrigin=d}var g=function(b){""===b&&(b=c&&c.id||t.id+O++,null!==document.getElementById(b)&&(b+=O++),a.id=b,C=(c||{}).log,h(b,"Added missing iframe ID: "+b+" ("+a.src+")"));return b}(a.id);if(g in b&&"iFrameResizer"in a)y(g,"Ignored iFrame, already setup.");else{l(c);h(g,"IFrame scrolling "+(b[g].scrolling?"enabled":"disabled")+" for "+g);a.style.overflow=!1===b[g].scrolling?"hidden":"auto";a.scrolling=!1===b[g].scrolling?"no":"yes";d();
if("number"===typeof b[g].bodyMargin||"0"===b[g].bodyMargin)b[g].bodyMarginV1=b[g].bodyMargin,b[g].bodyMargin=""+b[g].bodyMargin+"px";m(K(g));f()}}function D(a,b){null===v&&(v=setTimeout(function(){v=null;a()},b))}function Y(){function a(){for(var a in b)null===b[a].iframe.offsetParent||"0px"!==b[a].iframe.style.height&&"0px"!==b[a].iframe.style.width||p("Visibility change","resize",b[a].iframe,a)}function m(b){h("window","Mutation observed: "+b[0].target+" "+b[0].type);D(a,16)}function d(){var a=
document.querySelector("body");(new f(m)).observe(a,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0})}var f=c.MutationObserver||c.WebKitMutationObserver;f&&d()}function w(a){h("window","Trigger event: "+a);D(function(){P("Window "+a,"resize")},16)}function Q(){function a(){P("Tab Visable","resize")}"hidden"!==document.visibilityState&&(h("document","Trigger event: Visiblity change"),D(a,16))}function P(a,c){for(var d in b)"parent"===b[d].resizeFrom&&
b[d].autoResize&&!b[d].firstRun&&p(a,c,document.getElementById(d),d)}function aa(){q(c,"message",U);q(c,"resize",function(){w("resize")});q(document,"visibilitychange",Q);q(document,"-webkit-visibilitychange",Q);q(c,"focusin",function(){w("focus")});q(c,"focus",function(){w("focus")})}function A(){function a(a,c){if(c){if(!c.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==c.tagName.toUpperCase())throw new TypeError("Expected \x3cIFRAME\x3e tag, found \x3c"+c.tagName+
"\x3e");N(c,a);b.push(c)}}var b;S();aa();return function(d,c){b=[];switch(typeof c){case "undefined":case "string":Array.prototype.forEach.call(document.querySelectorAll(c||"iframe"),a.bind(void 0,d));break;case "object":a(d,c);break;default:throw new TypeError("Unexpected data type ("+typeof c+")");}return b}}function ba(a){a.fn?a.fn.iFrameResize355=function(a){return this.filter("iframe").each(function(b,c){N(c,a)}).end()}:x("info","","Unable to bind to jQuery, it is not fully loaded.",B(""))}var O=
0,C=!1,E=!1,l=null,r=c.requestAnimationFrame,Z={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},b={},v=null,t={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:Infinity,maxWidth:Infinity,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},
initCallback:function(){},messageCallback:function(){y("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return!0}};c.jQuery&&ba(jQuery);"function"===typeof define&&define.amd?define([],A):"object"===typeof module&&"object"===typeof module.exports?module.exports=A():c.iFrameResize355=c.iFrameResize355||A()})(window||{});