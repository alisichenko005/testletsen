/*
 iFrame Resizer (iframeSizer.min.js ) - v4.3.2 - 2021-04-26
  Desc: Force cross domain iframes to size to content.
  Requires: iframeResizer.contentWindow.min.js to be loaded into the target frame.
  Copyright: (c) 2021 David J. Bradshaw - dave@bradshaw.net
  License: MIT
*/
!function(u){function x(a,c,f){a.addEventListener(c,f,!1)}function Z(a,c,f){a.removeEventListener(c,f,!1)}function aa(a){return B+"["+(a="Host page: "+(b=a),window.top!==window.self?window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+b:"Nested host page: "+b:a)+"]";var b}function h(b,c){C("log",b,c,a[b]?a[b].log:z)}function r(a,c){C("warn",a,c,!0)}function C(a,c,f,d){!0===d&&"object"==typeof window.console&&console[a](aa(c),f)}function ba(b){function c(){d("Height");d("Width");
K(function(){L(k);M(g);A("onResized",k)},k,"init")}function f(){var b=v.substr(D).split(":"),d=b[1]?parseInt(b[1],10):0,e=a[b[0]]&&a[b[0]].iframe,c=getComputedStyle(e);return{iframe:e,id:b[0],height:d+function(a){if("border-box"!==a.boxSizing)return 0;var b=a.paddingTop?parseInt(a.paddingTop,10):0;a=a.paddingBottom?parseInt(a.paddingBottom,10):0;return b+a}(c)+function(a){if("border-box"!==a.boxSizing)return 0;var b=a.borderTopWidth?parseInt(a.borderTopWidth,10):0;a=a.borderBottomWidth?parseInt(a.borderBottomWidth,
10):0;return b+a}(c),width:b[2],type:b[3]}}function d(b){var d=Number(a[g]["max"+b]),e=Number(a[g]["min"+b]),c=b.toLowerCase();b=Number(k[c]);h(g,"Checking "+c+" is in range "+e+"-"+d);b<e&&(b=e,h(g,"Set "+c+" to min value"));d<b&&(b=d,h(g,"Set "+c+" to max value"));k[c]=""+b}function ca(){var d=b.origin,c=a[g]&&a[g].checkOrigin,e;if(e=c&&"null"!=""+d){if(c.constructor===Array){var f=0;e=!1;for(h(g,"Checking connection is from allowed list of origins: "+c);f<c.length;f++)if(c[f]===d){e=!0;break}c=
e}else c=(f=a[g]&&a[g].remoteHost,h(g,"Checking connection is from: "+f),d===f);e=!c}if(e)throw Error("Unexpected message received from: "+d+" for "+k.iframe.id+". Message was: "+b.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return 1}function t(a){return v.substr(v.indexOf(":")+N+a)}function O(a,b){var c=function(){var c,d;q("Send Page Info","pageInfo:"+(c=document.body.getBoundingClientRect(),d=k.iframe.getBoundingClientRect(),
JSON.stringify({iframeHeight:d.height,iframeWidth:d.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(d.top-c.top,10),offsetLeft:parseInt(d.left-c.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,documentHeight:document.documentElement.clientHeight,documentWidth:document.documentElement.clientWidth,windowHeight:window.innerHeight,windowWidth:window.innerWidth})),
a,b)};E[b]||(E[b]=setTimeout(function(){E[b]=null;c()},32))}function m(a){a=a.getBoundingClientRect();return P(g),{x:Math.floor(Number(a.left)+Number(l.x)),y:Math.floor(Number(a.top)+Number(l.y))}}function Q(a){var b=a?m(k.iframe):{x:0,y:0},c={x:Number(k.width)+b.x,y:Number(k.height)+b.y};h(g,"Reposition requested from iFrame (offset x:"+b.x+" y:"+b.y+")");window.top!==window.self?window.parentIFrame?window.parentIFrame["scrollTo"+(a?"Offset":"")](c.x,c.y):r(g,"Unable to scroll to requested position, window.parentIFrame not found"):
(l=c,e(),h(g,"--"))}function e(){!1!==A("onScroll",l)?M(g):l=null}function da(a){var b,c=a.split("#")[1]||"";a=decodeURIComponent(c);(a=document.getElementById(a)||document.getElementsByName(a)[0])?(b=m(a),h(g,"Moving to in page link (#"+c+") at x: "+b.x+" y: "+b.y),l={x:b.x,y:b.y},e(),h(g,"--")):window.top!==window.self?window.parentIFrame?window.parentIFrame.moveToAnchor(c):h(g,"In page link #"+c+" not found and window.parentIFrame not found"):h(g,"In page link #"+c+" not found")}function R(a){var b;
var c=0===Number(k.width)&&0===Number(k.height)?{x:(b=t(9).split(":"))[1],y:b[0]}:{x:k.width,y:k.height};A(a,{iframe:k.iframe,screenX:Number(c.x),screenY:Number(c.y),type:k.type})}function A(a,b){return F(g,a,b)}function n(){function b(b,c){function e(){a[f]?O(a[f].iframe,f):d()}["scroll","resize"].forEach(function(a){h(f,b+a+" listener for sendPageInfo");c(window,a,e)})}function d(){b("Remove ",Z)}switch(a[g]&&a[g].firstRun&&a[g]&&(a[g].firstRun=!1),k.type){case "close":G(k.iframe);break;case "message":var e=
t(6);h(g,"onMessage passed: {iframe: "+k.iframe.id+", message: "+e+"}");A("onMessage",{iframe:k.iframe,message:JSON.parse(e)});h(g,"--");break;case "mouseenter":R("onMouseEnter");break;case "mouseleave":R("onMouseLeave");break;case "autoResize":a[g].autoResize=JSON.parse(t(9));break;case "scrollTo":Q(!1);break;case "scrollToOffset":Q(!0);break;case "pageInfo":O(a[g]&&a[g].iframe,g);var f=g;b("Add ",x);a[f]&&(a[f].stopPageInfo=d);break;case "pageInfoStop":a[g]&&a[g].stopPageInfo&&(a[g].stopPageInfo(),
delete a[g].stopPageInfo);break;case "inPageLink":da(t(9));break;case "reset":S(k);break;case "init":c();A("onInit",k.iframe);break;default:0===Number(k.width)&&0===Number(k.height)?r("Unsupported message received ("+k.type+"), this is likely due to the iframe containing a later version of iframe-resizer than the parent page"):c()}}var u,w,p,y,v=b.data,k={},g=null;"[iFrameResizerChild]Ready"===v?function(){for(var b in a)q("iFrame requested init",T(b),a[b].iframe,b)}():B===(""+v).substr(0,D)&&v.substr(D).split(":")[0]in
a?(k=f(),g=k.id,a[g]&&(a[g].loaded=!0),(y=k.type in{true:1,false:1,undefined:1})&&h(g,"Ignoring init message from meta parent page"),!y&&(p=!0,a[w=g]||(p=!1,r(k.type+" No settings for "+w+". Message was: "+v)),p)&&(h(g,"Received: "+v),u=!0,null===k.iframe&&(r(g,"IFrame ("+k.id+") not found"),u=!1),u&&ca()&&n())):C("info",g,"Ignored: "+v,a[g]?a[g].log:z)}function F(b,c,f){var d=null;if(a[b]){if("function"!=typeof(d=a[b][c]))throw new TypeError(c+" on iFrame["+b+"] is not a function");d=d(f)}return d}
function U(b){b=b.id;delete a[b]}function G(a){var b=a.id;if(!1!==F(b,"onClose",b)){h(b,"Removing iFrame: "+b);try{a.parentNode&&a.parentNode.removeChild(a)}catch(f){r(f)}F(b,"onClosed",b);h(b,"--");U(a)}else h(b,"Close iframe cancelled by onClose event")}function P(a){null===l&&h(a,"Get page position: "+(l={x:window.pageXOffset!==u?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==u?window.pageYOffset:document.documentElement.scrollTop}).x+","+l.y)}function M(a){null!==
l&&(window.scrollTo(l.x,l.y),h(a,"Set page position: "+l.x+","+l.y),l=null)}function S(a){h(a.id,"Size reset requested by "+("init"===a.type?"host page":"iFrame"));P(a.id);K(function(){L(a);q("reset","reset",a.iframe,a.id)},a,"reset")}function L(b){function c(c){function f(){Object.keys(a).forEach(function(b){a[b]&&null!==a[b].iframe.offsetParent&&("0px"===(a[b]&&a[b].iframe.style.height)||"0px"===(a[b]&&a[b].iframe.style.width))&&q("Visibility change","resize",a[b].iframe,b)})}function l(a){h("window",
"Mutation observed: "+a[0].target+" "+a[0].type);y(f,16)}var m;H||"0"!==b[c]||(H=!0,h(d,"Hidden iFrame detected, creating visibility listener"),(m=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)&&function(){var a=document.querySelector("body");(new m(l)).observe(a,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0})}())}function f(a){b.id?(b.iframe.style[a]=b[a]+"px",h(b.id,"IFrame ("+d+") "+a+" set to "+b[a]+"px")):
h("undefined","messageData id not set");c(a)}var d=b.iframe.id;a[d]&&(a[d].sizeHeight&&f("height"),a[d].sizeWidth&&f("width"))}function K(a,c,f){f!==c.type&&n&&!window.jasmine?(h(c.id,"Requesting animation frame"),n(a)):a()}function q(b,c,f,d,l){function t(){var l;f&&"contentWindow"in f&&null!==f.contentWindow?(l=a[d]&&a[d].targetOrigin,h(d,"["+b+"] Sending msg to iframe["+d+"] ("+c+") targetOrigin: "+l),f.contentWindow.postMessage(B+c,l)):r(d,"["+b+"] IFrame("+d+") not found")}function q(){l&&a[d]&&
a[d].warningTimeout&&(a[d].msgTimeout=setTimeout(function(){!a[d]||a[d].loaded||m||(m=!0,r(d,"IFrame has not responded within "+a[d].warningTimeout/1E3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))},a[d].warningTimeout))}var m=!1;d=d||f.id;a[d]&&(t(),q())}function T(b){return b+":"+a[b].bodyMarginV1+":"+a[b].sizeWidth+":"+
a[b].log+":"+a[b].interval+":"+a[b].enablePublicMethods+":"+a[b].autoResize+":"+a[b].bodyMargin+":"+a[b].heightCalculationMethod+":"+a[b].bodyBackground+":"+a[b].bodyPadding+":"+a[b].tolerance+":"+a[b].inPageLinks+":"+a[b].resizeFrom+":"+a[b].widthCalculationMethod+":"+a[b].mouseEvents}function V(b,c){function f(c){var d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;d&&b.parentNode&&(new d(function(a){a.forEach(function(a){Array.prototype.slice.call(a.removedNodes).forEach(function(a){a===
b&&G(b)})})})).observe(b.parentNode,{childList:!0});x(b,"load",function(){q("iFrame.onload",c,b,u,!0);var d=a[e]&&a[e].firstRun;var f=a[e]&&a[e].heightCalculationMethod in W;!d&&f&&S({iframe:b,height:0,width:0,type:"init"})});q("init",c,b,u,!0)}function d(a){var b=a.split("Callback");2===b.length&&(this[b="on"+b[0].charAt(0).toUpperCase()+b[0].slice(1)]=this[a],delete this[a],r(e,"Deprecated: '"+a+"' has been renamed '"+b+"'. The old method will be removed in the next major version."))}function l(c){c=
c||{};a[e]={firstRun:!0,iframe:b,remoteHost:b.src&&b.src.split("/").slice(0,3).join("/")};if("object"!=typeof c)throw new TypeError("Options is not an object");Object.keys(c).forEach(d,c);var f=c,h;for(h in w)Object.prototype.hasOwnProperty.call(w,h)&&(a[e][h]=(Object.prototype.hasOwnProperty.call(f,h)?f:w)[h]);a[e]&&(a[e].targetOrigin=!0===a[e].checkOrigin?""===(c=a[e].remoteHost)||null!==c.match(/^(about:blank|javascript:|file:\/\/)/)?"*":c:"*")}function t(c){var d=a[e][c];1/0!==d&&0!==d&&(b.style[c]=
"number"==typeof d?d+"px":d,h(e,"Set "+c+" \x3d "+b.style[c]))}function n(b){if(a[e]["min"+b]>a[e]["max"+b])throw Error("Value for min"+b+" can not be greater than max"+b);}var m,p,e=(""===(m=b.id)&&(b.id=(p=c&&c.id||w.id+I++,null!==document.getElementById(p)&&(p+=I++),m=p),z=(c||{}).log,h(m,"Added missing iframe ID: "+m+" ("+b.src+")")),m);if(e in a&&"iFrameResizer"in b)r(e,"Ignored iFrame, already setup.");else{l(c);switch(h(e,"IFrame scrolling "+(a[e]&&a[e].scrolling?"enabled":"disabled")+" for "+
e),b.style.overflow=!1===(a[e]&&a[e].scrolling)?"hidden":"auto",a[e]&&a[e].scrolling){case "omit":break;case !0:b.scrolling="yes";break;case !1:b.scrolling="no";break;default:b.scrolling=a[e]?a[e].scrolling:"no"}n("Height");n("Width");t("maxHeight");t("minHeight");t("maxWidth");t("minWidth");"number"!=typeof(a[e]&&a[e].bodyMargin)&&"0"!==(a[e]&&a[e].bodyMargin)||(a[e].bodyMarginV1=a[e].bodyMargin,a[e].bodyMargin+="px");f(T(e));a[e]&&(a[e].iframe.iFrameResizer={close:G.bind(null,a[e].iframe),removeListeners:U.bind(null,
a[e].iframe),resize:q.bind(null,"Window resize","resize",a[e].iframe),moveToAnchor:function(b){q("Move to anchor","moveToAnchor:"+b,a[e].iframe,e)},sendMessage:function(b){q("Send Message","message:"+JSON.stringify(b),a[e].iframe,e)}})}}function y(a,c){null===p&&(p=setTimeout(function(){p=null;a()},c))}function X(){"hidden"!==document.visibilityState&&(h("document","Trigger event: Visiblity change"),y(function(){Y("Tab Visable","resize")},16))}function Y(b,c){Object.keys(a).forEach(function(f){a[f]&&
"parent"===a[f].resizeFrom&&a[f].autoResize&&!a[f].firstRun&&q(b,c,a[f].iframe,f)})}function ea(){x(window,"message",ba);x(window,"resize",function(){h("window","Trigger event: resize");y(function(){Y("Window resize","resize")},16)});x(document,"visibilitychange",X);x(document,"-webkit-visibilitychange",X)}function J(){function a(a,b){if(b){if(!b.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==b.tagName.toUpperCase())throw new TypeError("Expected \x3cIFRAME\x3e tag, found \x3c"+
b.tagName+"\x3e");V(b,a);c.push(b)}}var c;return function(){for(var a=["moz","webkit","o","ms"],b=0;b<a.length&&!n;b+=1)n=window[a[b]+"RequestAnimationFrame"];n?n=n.bind(window):h("setup","RequestAnimationFrame not supported")}(),ea(),function(b,d){switch(c=[],b&&b.enablePublicMethods&&r("enablePublicMethods option has been removed, public methods are now always available in the iFrame"),typeof d){case "undefined":case "string":Array.prototype.forEach.call(document.querySelectorAll(d||"iframe"),a.bind(u,
b));break;case "object":a(b,d);break;default:throw new TypeError("Unexpected data type ("+typeof d+")");}return c}}function fa(b){b.fn?b.fn.iFrameResize||(b.fn.iFrameResize=function(a){return this.filter("iframe").each(function(b,c){V(c,a)}).end()}):C("info","","Unable to bind to jQuery, it is not fully loaded.",a[""]?a[""].log:z)}var I,z,H,N,B,D,l,n,W,a,p,w,E;"undefined"!=typeof window&&(N=7,D=(B="[iFrameSizer]").length,n=window.requestAnimationFrame,w={autoResize:!(p=l=null),bodyBackground:null,
bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!(H=z=!1),inPageLinks:!(a={}),enablePublicMethods:!(I=0),heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!(W={max:1,scroll:1,bodyScroll:1,documentElementScroll:1}),maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,mouseEvents:!0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5E3,tolerance:0,widthCalculationMethod:"scroll",onClose:function(){return!0},onClosed:function(){},onInit:function(){},
onMessage:function(){r("onMessage function not defined")},onMouseEnter:function(){},onMouseLeave:function(){},onResized:function(){},onScroll:function(){return!0}},E={},window.jQuery&&fa(window.jQuery),"function"==typeof define&&define.amd?define([],J):"object"==typeof module&&"object"==typeof module.exports&&(module.exports=J()),window.iFrameResize=window.iFrameResize||J())}();