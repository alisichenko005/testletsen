var _xo_version="3.1.8";!function(t,e){"use strict";"object"==typeof exports?module.exports=e:t.JQ=e()}(this,function(){"use strict";var a={jq:function(){},get:function(t){},eq:function(t){},filter:function(t){if(this.is(t))return this},not:function(t){if(!this.is(t))return this},find:function(t){var e=t.replace(/(^\s*)/g,"");0<e.length&&">"===e[0]&&(t=":scope "+t);return h(t,this)},prev:function(t){var e=this.previousElementSibling;for(;null!==e;){if(e.is(t))return e;e=e.previousElementSibling}},next:function(t){var e=this.nextElementSibling;for(;null!==e;){if(e.is(t))return e;e=e.nextElementSibling}},parent:function(t){var e=this.parentNode;for(;null!==e&&"#document"!==e.nodeName;){if(e instanceof HTMLElement&&e.is(t))return e;e=e.parentNode}},parents:function(t){var e=[],i=this.parentNode;for(;null!==i&&"#document"!==i.nodeName;)i instanceof HTMLElement&&i.is(t)&&e.push(i),i=i.parentNode;return e},children:function(n){var t=Array.prototype.slice.call(this.childNodes);if(0!==(t=t.filter(function(t,e,i){if(t instanceof HTMLElement)return t.is(n)})).length)return t},siblings:function(t){var e=[],i=this.previousElementSibling;for(;null!==i&&"#document"!==i.nodeName;)i instanceof HTMLElement&&i.is(t)&&e.push(i),i=i.previousElementSibling;i=this.nextElementSibling;for(;null!==i;)i instanceof HTMLElement&&i.is(t)&&e.push(i),i=i.nextElementSibling;return e},is:function(t){return this.is(t)},aria:function(t){void 0===t&&(t=!0);!0===t?this.setAttribute("aria-hidden","true"):this.setAttribute("aria-hidden","false")},ready:function(t){{var e;"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?setTimeout(t,1):(e=function(){document.removeEventListener("DOMContentLoaded",e,!1),window.removeEventListener("load",e,!1),t()},document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1))}},height:function(t){if(void 0===t)return this.offsetHeight;this.style.setProperty("height",t+"px")},innerHeight:function(){var t=this.offsetHeight,e=getComputedStyle(this);return t-=parseInt(e.borderTopWidth)+parseInt(e.borderBottomWidth)},outerHeight:function(t){var e=this.offsetHeight;t&&(t=getComputedStyle(this),e+=parseInt(t.marginTop)+parseInt(t.marginBottom));return e},width:function(t){if(void 0===t)return this.offsetWidth;this.style.setProperty("width",t+"px")},hasClass:function(t){return this.hasClass(t)},addClass:function(t){var e;t&&(t=t.split(" "),e=this,t.forEach(function(t){0<t.length&&(e.classList?e.classList.add(t):e.className+=" "+t)}))},removeClass:function(t){var e;void 0===t?this.removeAttribute("class"):""!==t&&(t=t.split(" "),e=this,t.forEach(function(t){e.classList?e.classList.remove(t):e.className=e.className.replace(t," ")}))},toggleClass:function(t){{var e,i;this.classList?this.classList.toggle(t):(e=this.className.split(" "),0<=(i=e.indexOf(t))?e.splice(i,1):e.push(t),this.className=e.join(" "))}},hasAttribute:function(t){return this.hasAttribute(t)},getAttribute:function(t){return this.getAttribute(t)},setAttribute:function(t,e){if("object"==typeof t)for(var i in t)this.setAttribute(i,t[i]);else void 0===e&&(e=""),this.setAttribute(t,e)},removeAttribute:function(t){this.removeAttribute(t)},data:function(t,e){{if(t=t||"",void 0===e)return this.getAttribute("data-"+t);this.setAttribute("data-"+t,e)}},html:function(t){if(void 0===t)return this.innerHTML;this.innerHTML=t},text:function(t){if(void 0===t)return this.textContent;this.textContent=t},empty:function(){this.innerHTML=""},append:function(t){m(this,t,"beforeend")},prepend:function(t){m(this,t,"afterbegin")},before:function(t){m(this,t,"beforebegin")},after:function(t){m(this,t,"afterend")},wrap:function(t){m(this,t,"beforebegin"),m(this.previousElementSibling,this,"beforeend"),this.parentNode.removeChild(this)},remove:function(){null!==this.parentNode&&this.parentNode.removeChild(this)},val:function(t){if(void 0===t)return this.value;this.value=t},focus:function(){this.focus()},show:function(){this.style.display=""},hide:function(){this.style.display="none"},isVisible:function(){return this.is(":visible")},isDisabled:function(){return this.is(":disabled")},isEmpty:function(){return this.is(":empty")},enable:function(t){void 0===t&&(t=!0);!0===t?h(this).removeClass("is-disabled").removeAttribute("disabled"):h(this).addClass("is-disabled").setAttribute("disabled",!0)},disable:function(){h(this).enable(!1)},prop:function(t){return this[t]},property:function(t,e){if(void 0===e)return this.style.getPropertyValue(t);""===e?this.style.removeProperty(t):this.style.setProperty(t,e)},css:function(t,e){if(void 0!==t||void 0!==e){if("string"==typeof t&&void 0===e)return function(t,e){if(e&&"string"==typeof e)return getComputedStyle(t).getPropertyValue(e)}(this,t);b(this,t,e)}},removeCss:function(t){{var e;"object"==typeof t?(e=this,Object.keys(t).forEach(function(t){b(e,t,"")})):void 0!==t&&(this.style[t]="")}},pseudoCss:function(t,e,i,n){this.pseudoCss(t,e,i,n)},each:function(e){"function"==typeof e&&h(this).forEach(function(t){e.call(t,h(t))})},off:function(t,e,i){var n,a;t&&(n="",void 0!==e&&(n=v(e,i)),e=t.split(" "),a=this,e.forEach(function(t){y(a,t,n)}))},on:function(t,e,i){var n,a;t&&void 0!==e&&(n=v(e,i),i=t.split(" "),a=this,i.forEach(function(t){y(a,t,n),C(a,t,n,e)}))},one:function(e,i,t){var n=v(i,t),a=this;function s(t){e.split(" ").forEach(function(t){y(a,t,n)}),i(t)}e.split(" ").forEach(function(t){C(a,t,n,s)})},once:function(t,e){this.addEventListener(t,e,{once:!0})},setListener:function(t,e){0<h(this).length&&h(this).on(t,e)},removeListener:function(t){0<h(this).length&&h(this).off(t)},trigger:function(t,e){{var i;void 0===e?(i=document.createEvent("HTMLEvents")).initEvent(t,!0,!1):(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,e),this.dispatchEvent(i)}},scrollTop:function(t){void 0===t&&(t=0);void 0!==this.scrollTop?this.scrollTop=t:this.scrollTo(this.scrollX,t)},scrollLeft:function(t){void 0===t&&(t=0);void 0!==this.scrollLeft?this.scrollLeft=t:this.scrollTo(t,this.scrollY)},animate:function(e,t,i,n){void 0===t&&(t=400);void 0===i&&(i="linear");void 0===n&&(n=function(){});e.transition=t+"ms "+i;var a="";Object.keys(e).forEach(function(t){"translate"!==t&&"translateX"!==t&&"translateY"!==t&&"translateZ"!==t&&"rotate"!==t&&"rotateZ"!==t&&"scale"!==t&&"scaleX"!==t&&"scaleY"!==t&&"skewX"!==t&&"skewY"!==t||(a+=" "+t+"("+e[t]+")")}),0<a.length&&(e.transform=a);void 0!==e.transition&&(e["webkit-transition"]=e.transition);void 0!==e["transform-origin"]&&(e["webkit-transform-origin"]=e["transform-origin"]);void 0!==e.transform&&(e["webkit-transform"]=e.transform);this.offsetWidth,h(this).css(e),h(this).one("transitionend webkitTransitionEnd animationend webkitAnimationEnd",n)},callPrototype:e,cloneJson:i,isIOS:d,isAndroid:l,isConnected:o,isVoiceOver:r,isDefined:n,rootProperty:f,device:u,platform:p,layout:c,media:function(){var t=h("[data-tb-media]"),e="";0<t.length&&(e=t.css("counter-reset").split(" ")[0],t.setAttribute("data-tb-media",e));return e},getRandomString:g,instanceOf:s,_listEvent:$},t={classIOS:"device-ios",classAndroid:"device-android",classDesktop:"device-desktop",classConnected:"tb-user-connected",attrAccessible:"data-tb-accessible",valVoiceOver:"voiceover"};function h(t,e){if(null==(t=0===arguments.length?"body":t))return x([]);if("string"!=typeof(e=void 0===(e=e||document)?document:e)&&void 0!==e.length&&(e=e[0]),"object"==typeof t&&void 0!==t.jq)return x(t.slice());if("string"!=typeof t)return t.tagName||"object"==typeof t?x([t]):x([]);if("#"===(t=0<=t.indexOf(":selected")?t.replace(":selected",":checked"):t)[0]){if("#"===t)return x([]);var i=t.substring(1);if(null!==(i=document.getElementById(i)))return"string"==typeof e&&i.tagName!==e.toUpperCase()?h(i).find(e):h(i)}var n;return void 0===(e="string"==typeof e?document:e)&&(e=document),(n=t.match(/<(.+)>/))?h(i=document.createElement(n[1])):x([].slice.call(e.querySelectorAll(t)))}function s(t){var e;return void 0===t?"Undefined":null===t?"Null":"Array"===(e=Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1])&&t.hasOwnProperty("jq")?"JQ":e}function e(t,e,i){var n=s(i);return"Undefined"===n||"Null"===n?i=[]:"Array"!==n&&(i=[i]),"Date"===s(t)&&void 0!==Date.prototype[e]?Date.prototype[e].apply(t,i):"Number"===s(t)&&void 0!==Number.prototype[e]?Number.prototype[e].apply(t,i):"String"===s(t)&&void 0!==String.prototype[e]?String.prototype[e].apply(t,i):null}function i(t){return JSON.parse(JSON.stringify(t))}function n(t){return null!=t&&""!==t}function r(){return document.body.getAttribute(t.attrAccessible)===t.valVoiceOver}function o(){return document.body.hasClass(t.classConnected)}function d(){return document.body.hasClass(t.classIOS)}function l(){return document.body.hasClass(t.classAndroid)}function u(){return navigator.platform.match(/iPhone|iPod|iPad/)?(h("body").removeClass(t.classAndroid).addClass(t.classIOS),t.classIOS):(h("body").removeClass(t.classIOS).addClass(t.classAndroid),t.classAndroid)}function c(){var t=h("body"),e=t.rootProperty("--tb-layout"),i=(null===e&&(e=t.css("counter-reset").split(" ")[0]),t.data("tb-layout",e),"portrait");return window.innerHeight<window.innerWidth&&(i="paysage"),t.data("tb-orientation",i),e}function p(){var t=(navigator&&navigator.platform||"").toLowerCase(),e=(navigator&&navigator.userAgent||"").toLowerCase(),i=/android/.test(e),n=i&&/mobile/.test(e),a=i&&!/mobile/.test(e),s=e.match(/ipad.+?os (\d+)/),r=s?null:e.match(/iphone(?:.+?os (\d+))?/),o=r||s,d=/linux/.test(t)&&!i,t=/mac/.test(t),s=s||a,a=r||n,r=e.match(/version\/(\d+).+?safari/),n=e.match(/edge\/(\d+)/),l=e.match(/(?:firefox|fxios)\/(\d+)/),u=e.match(/(?:msie |trident.+?; rv:)(\d+)/),e=e.match(/(?:chrome|crios)\/(\d+)/),c=h("body"),p={os:"win32",device:"laptop",navigator:"?"};return o&&(p.os="ios"),i&&(p.os="android"),d&&(p.os="linux"),t&&(p.os="mac"),c.data("tb-os",p.os),s&&(p.device="tablet"),a&&(p.device="mobile"),c.data("tb-device",p.device),e&&(p.navigator="chrome"),r&&(p.navigator="safari"),n&&(p.navigator="edge"),u&&(p.navigator="ie"),l&&(p.navigator="firefox"),c.data("tb-navigator",p.navigator),p}function f(t,e,i){null==e&&(e=document.body);e=getComputedStyle(e).getPropertyValue(t);return null!==e&&""!==e?e:i||null}function g(t){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=i.length,a=0;a<t;a++)e+=i.charAt(Math.floor(Math.random()*n));return e}function m(t,e,i){var n;"string"==typeof e?t.insertAdjacentHTML(i,e):"object"==typeof e&&void 0!==e.jq&&0<e.length?(n=e.get(0).outerHTML,t.insertAdjacentHTML(i,n)):"object"==typeof e&&void 0!==e.nodeType&&3===e.nodeType?t.insertAdjacentHTML(i,e.nodeValue):"object"==typeof e&&void 0!==e.nodeType&&1===e.nodeType&&t.insertAdjacentHTML(i,e.outerHTML)}function b(e,i,t){"object"==typeof i?Object.keys(i).forEach(function(t){b(e,t,i[t])}):void 0!==i&&(e.style[i]=t)}function v(t,e){return(e=void 0===e?"":e)+":"+(""+t).hashCode()}function $(t){t.eventListenerList=t.eventListenerList||[],console.error(" _listEvent = ",t.eventListenerList.length);for(var e=0;e<t.eventListenerList.length;e++)console.error("   "+e+" '"+t.eventListenerList[e].type+"'","sig='"+t.eventListenerList[e].signature+"'")}function y(t,e,i){t.eventListenerList=t.eventListenerList||[];for(var n=0;n<t.eventListenerList.length;n++)t.eventListenerList[n].type!==e||void 0!==i&&""!==i&&t.eventListenerList[n].signature!==i||(t.removeEventListener(e,t.eventListenerList[n].listener,!1),t.eventListenerList.splice(n,1),n--)}function C(t,e,i,n){t.eventListenerList=t.eventListenerList||[],t.eventListenerList.push({type:e,listener:n,signature:i}),t.addEventListener(e,n)}function x(t){return Object.keys(a).forEach(function(n){t[n]=function(){var e,t,i=arguments;if(Array.isArray(this)){if(e=[],"jq"===n)return 0<this.length;if("get"===n)return 0===i.length?this.slice():this[i[0]];if("eq"===n)return 0===i.length?x(this.slice()):0<=(t=(t=i[0])<0?this.length-1+i[0]:t)&&t<this.length?h(this[t]):x([]);if(this.forEach(function(t){t=a[n].apply(t,[].slice.call(i));Array.isArray(t)?e=e.concat(t):void 0!==t&&e.push(t)}),"before"!==n&&"prepend"!==n&&"append"!==n&&"after"!==n||void 0!==(t=i[0]).jq&&0<t.length&&void 0!==t.remove&&t.remove(),"text"===n&&0!==e.length&&(e[0]=e.join("")),"find"===n||"filter"===n||"not"===n||"parent"===n||"parents"===n||"next"===n||"prev"===n||"children"===n||"siblings"===n)return 0===e.length||null===e[0]?x([]):x(e);e=e.length&&e||void 0}else e=a[n].apply(this,[].slice.call(i));return void 0===e?this:e[0]}}),t}return{$:h,isIOS:d,isAndroid:l,isConnected:o,isVoiceOver:r,rootProperty:f,device:u,platform:p,layout:c,callPrototype:e,cloneJson:i,isDefined:n,getRandomString:g,instanceOf:s,_listEvent:$}}),Number.prototype.format=function(t,e,i,n){e="\\d(?=(\\d{"+(e||3)+"})+"+(0<t?"\\D":"$")+")",t=this.toFixed(Math.max(0,~~t));return(n?t.replace(".",n):t).replace(new RegExp(e,"g"),"$&"+i)},Number.prototype.montant=function(){return this.format(2,3,".",",")},Number.prototype.fileSize=function(t,e,i){void 0===t&&(t=2),void 0===e&&(e=" ");i=" KMGTP".indexOf(i=void 0===i?" ":i);return 0==this?"0"+e+" KMGTP".charAt(i)+"o":(0===i&&(i=Math.floor(Math.log(this)/Math.log(1024))),((this/Math.pow(1024,i)).toFixed(t)+e+" KMGTP".charAt(i)+"o").replace(".",","))},Number.prototype.date=function(){return new Date(this)},Date.prototype.format=function(t){t=t.split("");for(var e=this.getDate(),i=this.getMonth(),n=this.getDay(),a=this.getFullYear(),s=a<10?"000"+a:a<100?"00"+a:a<1e3?"0"+a:""+a,r=1===new Date(a,1,29).getMonth(),o=[31,r?29:28,31,30,31,30,31,31,30,31,30,31],d=new Date(a,0,1),a=new Date(a,i,1),l={d:e<10?"0"+e:e,j:e,l:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"][n],w:n,N:0===n?7:n,z:Math.ceil((this-d)/864e5),W:Math.ceil(((this-d)/864e5+d.getDay()+1)/7),F:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"][i],m:i<9?"0"+(i+1):i+1,n:i+1,t:o[i],Z:0===a.getDay()?7:a.getDay(),L:r?"1":"0",Y:s,y:s.substring(2,4)},u="",c=0;c<t.length;c++){var p=t[c];p.match(/[a-zA-Z]/g)?u+=l[p]||"":u+=p}return u},Date.prototype.fr=function(){return this.format("d/m/Y")},Date.prototype.en=function(){return this.format("Y-m-d")},Date.prototype.compare=function(t){return this.format("Ymd").compare(t.format("Ymd"))},Date.prototype.shift=function(t){return void 0!==t&&("string"==typeof t&&(t=parseInt(t)),this.setDate(this.getDate()+t)),this},String.prototype.hashCode=function(){var t,e,i=0;if(0!==this.length)for(t=0,e=this.length;t<e;t++)i=(i<<5)-i+this.charCodeAt(t),i|=0;return i},String.prototype.montant=function(){return this.replace(/ /g,"").number().montant()},String.prototype.number=function(){var t=this.replace(/ /g,"");return t=this.testRegex("number_fr")?parseFloat(t.replace(/\./g,"").replace(/,/g,".")):this.testRegex("number_en")?parseFloat(this.replace(/,/g,"")):Number.NaN},String.prototype.date=function(t){var e=this.split("/").reverse().join("-");return void 0===t&&(t="0"),e.isDate()?new Date(e).shift(t):new Date("NaN")},String.prototype.testRegex=function(t){var n,a,s;return void 0!==t&&(n={time:"^(0[0-9]|1[0-9]|2[0-3]|[0-9]):[0-5][0-9]$",date_en:"(\\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))",date_fr:"^([0-2][0-9]|(3)[0-1])(\\/)(((0)[0-9])|((1)[0-2]))(\\/)\\d{4}$",email:"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$",password:"^(?=.*[a-z])(?=.*[A-Z])(?=.*d)(?=.*[#$^+=!*()@%&]).{8,10}$",number_en:"^((\\d{1,3})(?:,[0-9]{3}){0,2}|(\\d{1})(?:,[0-9]{3}){0,}|(\\d{1,}))(\\.\\d{0,})?$",number_fr:"^((\\d{1,3})(?:.[0-9]{3}){0,2}|(\\d{1})(?:\\.[0-9]{3}){0,}|(\\d{1,}))(,\\d{0,})?$"},t=t.split(" "),a=!1,s=this,t.forEach(function(t){if(!1===a)for(var e in n){var i;n.hasOwnProperty(e)&&!1===a&&e.startsWith(t)&&(i=!1,void 0!==(e=n[e])&&(i=new RegExp(e).test(s)),a=a||i)}}),a)},String.prototype.isDate=function(){return this.testRegex("date")},String.prototype.isTime=function(){return this.testRegex("time")},String.prototype.isEmail=function(){return this.testRegex("email")},String.prototype.isNumber=function(){return this.testRegex("number")},String.prototype.compare=function(t){t=this.localeCompare(t);return 0<t?1:t<0?-1:0},String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(e=e||0,t.length)===t}),HTMLElement.prototype.pseudoCss=function(t,e,i,n){var a=this,s=document.head||document.getElementsByTagName("head")[0],r="pseudoCss-"+t;if(void 0===e){for(var o=s.querySelectorAll("style[id^='"+r+"']"),d=0,l=o.length;d<l;d++)o[d].parentNode.removeChild(o[d]);var u=new RegExp("\\b(\\w*"+t+"([\\w-])*)\\b","g");a.className=a.className.replace(u,""),a.className=a.className.trim()}else{r+=e;u=document.getElementById(r)||document.createElement("style");u.id=r,u.innerHTML="."+t+":"+e+"{"+i+":"+n+";}",s.appendChild(u),a.className.indexOf(t)<=-1&&(a.className+=" "+t,a.className=a.className.trim())}return this},HTMLElement.prototype._is=function(t){var e,i;return void 0===t||(":visible"===t?(e=window.getComputedStyle(this,null).visibility,i=window.getComputedStyle(this,null).display,"hidden"!==e&&"none"!==i):":hidden"===t?(e=window.getComputedStyle(this,null).visibility,i=window.getComputedStyle(this,null).display,"hidden"===e||"none"===i):":disabled"===t?this.disabled:(this.matches||this.matchesSelector||this.msMatchesSelector||this.mozMatchesSelector||this.webkitMatchesSelector||this.oMatchesSelector).call(this,t))},HTMLElement.prototype.is=function(t){var e,i;return void 0===t||(e=!1,t=t.split(","),i=this,t.forEach(function(t){i._is(t)&&(e=!0)}),e)},HTMLElement.prototype.hasClass=function(t){var t=t.split(" "),e=this,i=!0;return t.forEach(function(t){0<t.length&&(e.classList?e.classList.contains(t)||(i=!1):new RegExp("(^| )"+t+"( |$)","gi").test(this.className)||(i=!1))}),i},function(t,e){"use strict";"object"==typeof exports?module.exports=e:t.tbAutoCompleteService=e(t.JQ)}(this,function(f){return function(){"use strict";var t={};function a(t,e,i,n){var a=document.createElement("button");a.className="flex-container flex-align-center flex-center "+e,a.setAttribute("data-lien-user","actif"),a.setAttribute("type","button"),"--search"===e&&(a.setAttribute("tabindex","-1"),a.setAttribute("aria-hidden","true")),a.innerHTML='<span data-tb-autocomplete-icon data-icon="'+i+'" class="'+e+'" aria-hidden="true"></span>',a.innerHTML+='<span data-tb-autocomplete-aria class="visually-hidden access-text">'+n+"</span>",t.$container.get(0).appendChild(a)}function s(t,e){t.id;var i=f.$("*:focus");t.$container.removeClass("--focus-within"),!0===t.$container.get(0).contains(i.get(0))||t.id===i.getAttribute("data-tb-id")?t.$container.addClass("--focus-within"):!1===t.$container.get(0).contains(e.relatedTarget)&&(c(null,t),setTimeout(function(){t.$input.trigger("tbAutoComplete",{id:t.id,action:"containerblur"})},50))}function r(t,e){var i,n;t.$input.isDisabled()||((i=f.$(e.target)).hasClass("--reset")&&(o(t),t.$input.trigger("input"),document.getElementById(t.id).focus()),i.hasClass("--search")&&((i=t).$input.trigger("tbAutoComplete",{id:i.id,action:"focus"}),n=i.$input.val(),i.$input.get(0).selectionStart=n.length,i.$input.get(0).selectionEnd=n.length,document.getElementById(t.id).focus()),s(t,e))}function o(t){t.id,t.$input.val(""),t.$input.trigger("change"),t.$input.trigger("tbAutoComplete",{id:t.id,action:"reset"}),t.$input.trigger("tbAutoComplete",{id:t.id,action:"list",count:0,input:""}),t.$container.removeClass("--empty"),t.$container.addClass("--empty"),t.$container.removeClass("--key-down"),c(null,t)}function l(t,e){e.offsetTop<t.scrollTop?t.scrollTop=e.offsetTop:(e=e.offsetTop+e.offsetHeight,t.scrollTop+t.offsetHeight<e&&(t.scrollTop=e-t.offsetHeight))}function u(t,e){if(t){for(var i=t,n=e,a=0;a<i.length;a++)i[a].setAttribute("aria-selected","false");n.$input.setAttribute("aria-activedescendant",""),e.currentFocus>=t.length&&e.currentFocus--,e.currentFocus<0&&(e.currentFocus=0),t[e.currentFocus].setAttribute("aria-selected","true"),e.$input.setAttribute("aria-activedescendant",t[e.currentFocus].getAttribute("id"))}}function c(t,e){for(var i=document.getElementsByClassName("tb-autocomplete-list"),n=0;n<i.length;n++)t!=i[n]&&t!==e.$input.get(0)&&i[n].parentNode.removeChild(i[n]);e.$input.setAttribute("aria-expanded","false"),e.$input.setAttribute("aria-activedescendant","");var a=document.getElementById(e.id+"-aria");null!==a&&(a.innerHTML=""),e.$container.removeClass("--open")}function p(t,e,i){for(var n,a=i.$input.get(0).value,s=0,r=0;r<i.list.length;r++){var o=i.list[r],d=i.list[r],l=("object"==typeof i.list[r]&&(void 0===(o=i.list[r].value)&&(o=i.list[r].code),d=i.list[r].label),d.toLowerCase().indexOf(a.toLowerCase()));void 0!==i.list[r].find&&(l=i.list[r].find.toLowerCase().indexOf(a.toLowerCase())),"start"===e&&0!==l&&(l=-1),0<=(l="containonly"===e&&0===l?-1:l)&&(d.toLowerCase()===a.toLowerCase()&&(i.code=o,i.label=d,""===i.exact)&&(i.exact=o),(n=document.createElement("LI")).setAttribute("id",i.id+"-"+r),n.setAttribute("data-tb-id",i.id),n.setAttribute("class","flex-container flex-align-center"),n.setAttribute("role","option"),n.setAttribute("tabindex","-1"),n.setAttribute("aria-selected","false"),n.setAttribute("data-tb-code",o),o="<div aria-hidden='true'>"+d.substr(0,l),o=(o+="<span class='bold --letters'>"+d.substr(l,a.length)+"</span>")+d.substr(l+a.length)+"</div>",n.innerHTML=o,n.innerHTML+="<div class='access-text visually-hidden'>"+d+"</div>",n.addEventListener("click",function(t){i.$input.get(0).value=this.getElementsByClassName("access-text")[0].innerHTML,i.$input.trigger("input"),document.getElementById(i.id).focus(),c(null,i)}),t.appendChild(n),s++)}return s}function h(t,e,i,n){var a=t.getAttribute("data-tb-autocomplete-"+e);return a=null===a&&null===(a=t.getAttribute("tb-autocomplete-"+e))&&null===(a=t.getAttribute(e))&&void 0!==i?jsonConfiguration(i,n):a}return t.set=function(t,e){var i=f.$(t),n=JSON.parse(i.get(0).dataset.list);if(""===e)i.val(""),i.trigger("input");else for(var a=0;a<n.length;a++){var s=n[a],r=n[a];if("object"==typeof n[a]&&(void 0===(s=n[a].value)&&(s=n[a].code),r=n[a].label),s.toLowerCase()===e.toLowerCase()){i.val(r),i.trigger("input");break}}},t.get=function(t){return f.$(t).getAttribute("data-tb-value")},t.init=function(t){var i,d=this,e=(t="object"!=typeof t?{}:t).element,n=t.target,t=(void 0===e&&(e=document.getElementById(n)),this.id=e.getAttribute("id"),this.list=t.list,void 0===this.list&&(this.list=h(e,"list"),null===this.list)&&(this.list=[]),this.show=t.show,void 0===this.show&&(this.show=h(e,"show"),null===this.show)&&(this.show=5),this.search=t.search,void 0===this.search&&(this.search=h(e,"search"),null===this.search)&&(this.search="contain"),this.sort=t.sort,void 0===this.sort&&(this.sort=h(e,"sort"),null===this.sort)&&(this.sort=""),void 0!==t.sort&&""!==t.sort&&(i=d).list.sort(function(t,e){return"object"==typeof t&&(t=t[i.sort],e=e[i.sort]),t<e?-1:e<t?1:0}),this.accessloupe=h(e,"accessloupe"),null===this.accessloupe&&(this.accessloupe=""),this.accessreset=h(e,"accessreset"),null===this.accessreset&&(this.accessreset="Effacer la saisie dans le champ de recherche"),this.accessnodata=h(e,"accessnodata"),null===this.accessnodata&&(this.accessnodata="Aucune donn&#233;e"),this.findmin=t.findmin,void 0===this.findmin&&(this.findmin=h(e,"findmin"),null===this.findmin)&&(this.findmin="1"),this.filtre=t.filtre,void 0===this.filtre&&(this.filtre=h(e,"filtre"),null===this.filtre)&&(this.filtre="^.*$"),this.filtre=new RegExp(this.filtre),this.$input=f.$(e),this.$container=this.$input.parent(),(n=d).$container.hasClass("--injected")||(n.$input.addClass("--noborder --transparent"),n.$input.addClass("flex-item-fluid"),n.$input.addClass("flex-item-center"),n.$container.hasClass("--search")&&a(n,"--search","tb-loupe",n.accessloupe),a(n,"--reset","tb-reset",n.accessreset),n.$container.addClass("--injected")),this.$input.get(0).dataset.list=JSON.stringify(this.list),this.$input.setAttribute("aria-autocomplete","list"),this.$input.setAttribute("role","combobox"),this.$input.setAttribute("aria-expanded","false"),this.$input.setAttribute("aria-activedescendant",""),document.createElement("DIV"));t.setAttribute("id",this.id+"-aria"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.setAttribute("class","tb-autocomplete-count visually-hidden"),e.parentNode.appendChild(t),this.$input.setListener("input",function(t){var e,i,n,a,s,r,o;t=t,o=(e=d).$input.get(0).value,e.$container.removeClass("--empty"),""===o&&e.$container.addClass("--empty"),0<o.length&&!1===e.filtre.test(o)?(e.$input.trigger("tbAutoComplete",{id:e.id,action:"error",error:"filtre"}),c(null,e)):!1===e.$container.hasClass("--focus-within")?c(null,e):(e.$input.setAttribute("data-tb-value",""),(i=document.getElementById(e.id+"-aria")).innerHTML="",e.$input.trigger("change"),n=0,a=e.$container.get(0).getBoundingClientRect(),a="left:0px; top:"+(e.$input.height()+8)+"px; width:"+a.width+"px",c(null,e),0<o.length&&o.length<e.findmin?setTimeout(function(){i.innerHTML="Aucune suggestion trouv&#233;e",e.$input.trigger("change"),e.$input.trigger("tbAutoComplete",{id:e.id,action:"empty",input:o})},0):""===o&&!1===e.$container.hasClass("--key-down")||(e.currentFocus=-1,e.code="",e.label="",(r=document.createElement("UL")).setAttribute("id",e.id+"-list"),r.setAttribute("class","tb-autocomplete-list unstyled"),r.setAttribute("role","listbox"),t.target.parentNode.parentNode.appendChild(r),e.exact="",n=0,""===o&&!0===e.$container.hasClass("--key-down")?n+=p(r,"*",e):("start"!==e.search&&"startcontain"!==e.search||(n+=p(r,"start",e)),"contain"===e.search&&(n+=p(r,"contain",e)),"startcontain"!==e.search&&"containonly"!==e.search||(n+=p(r,"containonly",e))),r.setAttribute("count",n),(t=n)>e.show&&(r.setAttribute("class","tb-autocomplete-list unstyled --scrollbar"),t=e.show),s=f.$(r).find("LI").height(),r.setAttribute("style",a+"; max-height:"+(s*t+2)+"px; min-height:"+(s*t+2)+"px"),e.$input.setAttribute("data-tb-value",""),0<n?(e.$input.setAttribute("aria-expanded","true"),e.$input.trigger("tbAutoComplete",{id:e.id,action:"list",count:n,input:o}),""!==e.exact&&""!==e.code&&(e.$input.setAttribute("data-tb-value",e.code),e.$input.trigger("tbAutoComplete",{id:e.id,action:"find",label:e.label,value:e.code}))):((s=document.createElement("LI")).setAttribute("id",e.id+"-"+n),s.setAttribute("class","flex-container flex-align-center"),s.setAttribute("role","option"),s.setAttribute("tabindex","-1"),s.setAttribute("aria-selected","false"),s.innerHTML=e.accessnodata,r.appendChild(s),r.setAttribute("style",a+"; max-height:"+s.offsetHeight+"px; min-height:"+s.offsetHeight+"px"),e.$input.trigger("tbAutoComplete",{id:e.id,action:"empty",input:o})),e.$container.addClass("--open"),setTimeout(function(){i.innerHTML="","true"===e.$input.getAttribute("aria-expanded")&&(i.innerHTML="Aucune suggestion trouv&#233;e",0<n)&&(i.innerHTML=n+" suggestions disponibles"),e.$input.trigger("change")},0),""===o&&e.$container.hasClass("--key-down")&&(r=(t=r)&&r.getElementsByTagName("li"),e.currentFocus++,u(r,e),l(t,r[e.currentFocus])),e.$container.removeClass("--key-down")))}),this.$input.setListener("keydown",function(t){var e,i,n,a;e=d,t=t,n=a=document.getElementById(e.id+"-list"),a=a&&a.getElementsByTagName("li"),40==t.keyCode?(t.preventDefault(),i=e.$input.get(0).value,e.$container.hasClass("--open")||""!==i?(e.currentFocus++,u(a,e),l(n,a[e.currentFocus])):(e.$container.addClass("--key-down"),e.$input.trigger("input"))):38==t.keyCode?(t.preventDefault(),e.currentFocus--,u(a,e),l(n,a[e.currentFocus])):13==t.keyCode?(-1<e.currentFocus&&(t.preventDefault(),a)&&a[e.currentFocus].click(),c(a,e)):9!=t.keyCode&&27!=t.keyCode||c(a,e)}),this.$input.setListener("focus",function(t){var e;t=t,(e=d).$input.trigger("tbAutoComplete",{id:e.id,action:"onfocus"}),s(e,t)}),this.$input.setListener("blur",function(e){setTimeout(function(){var t;s(t=d,e),t.$input.trigger("tbAutoComplete",{id:t.id,action:"onblur"})},0)}),this.$icon=this.$container.find("button"),this.$icon.setListener("click",function(t){r(d,t)}),this.$icon.setListener("keydown",function(t){13!==t.keyCode&&13!==t.which&&32!==t.keyCode&&32!==t.which||(r(d,t),t.stopPropagation(),t.preventDefault())}),this.$icon.setListener("blur",function(t){s(d,t)}),this.observer=new MutationObserver(function(t){t.forEach(function(t,e){t.target===d.$input.get(0)&&("attributes"==t.type&&"readonly"===t.attributeName&&(d.$container.removeClass("--readonly"),!0===t.target.readOnly)&&d.$container.addClass("--readonly"),"attributes"==t.type&&"disabled"===t.attributeName&&(d.$container.enable(!t.target.disabled),d.$icon.enable(!t.target.disabled),d.$container.removeClass("--disabled"),!0===t.target.disabled)&&d.$container.addClass("--disabled"),"attributes"==t.type&&"data-list"===t.attributeName&&(d.list=JSON.parse(f.$(t.target).getAttribute(t.attributeName)),o(d)),"attributes"!=t.type||"filtre"!==t.attributeName&&"data-tb-autocomplete-filtre"!==t.attributeName||(d.filtre=f.$(t.target).getAttribute(t.attributeName),d.filtre=new RegExp(d.filtre),o(d)))})}),this.observer.observe(e,{attributes:!0,subtree:!1}),this.$input.addClass("--ready"),d.$container.removeClass("--empty"),""===this.$input.val()&&d.$container.addClass("--empty"),setTimeout(function(){var t={id:d.id,action:"ready"};null!==d.$input.getAttribute("formControlName")&&(t.formControlName=d.$input.getAttribute("formControlName")),d.$input.trigger("tbAutoComplete",t)},25)},t}}),function(t,e){"use strict";"object"==typeof exports?module.exports=e:t.tbCvdPswService=e(t.JQ)}(this,function(f){return function(){"use strict";var e={};function c(t){var e=t.$errors.find("[data-ad-message=incomplet] span[aria-hidden]"),i=t.$errors.find("[data-ad-message=incomplet] span[class*=visually-hidden]"),e=e.html(),n=t.$input.val();0<n.length&&n.length!==t.maxlength&&(n.length===t.maxlength-1?e+=", fournir le dernier chiffre":e+=", fournir les "+(t.maxlength-n.length)+" derniers chiffres"),i.html(e)}function p(t){t.$input.val(""),t.$input.trigger("change"),t.$input.trigger("tbCvdPsw",{id:t.id,action:"reset"}),setTimeout(function(){t.$container.hasClass("--empty")||f.$("[data-tb-index='0']").get(0).focus(),t.$container.addClass("--empty"),t.$reset.setAttribute("hidden","true")},100),t.$container.find(".puce").removeClass("--select"),t.$aria.setAttribute("aria-live","polite"),t.$aria.html("<p>0 chiffre saisi sur "+t.maxlength+"</p>"),c(t)}function h(t){return e.getCodePinPositions(t.$input.get(0))}return e.$container,e.$input,e.$aria,e.$reset,e.id,e.maxlength,e.accessreset,e.callback,e.digits,e.$formfield,e.$label,e.$errors,e.$valider,e.get=function(t){return f.$(t).val()},e.getCodePinPositions=function(t){for(var e=f.$(t).val(),i="",n=0;n<e.length;n++)i+=n+1+":"+(parseInt(e[n])+1),n<e.length-1&&(i+=",");return i},e.init=function(t){var r=this,e=(t="object"!=typeof t?{}:t).element,i=t.target,i=(void 0===e&&(e=document.getElementById(i)),this.id=e.getAttribute("id"),void 0===t.positions?"1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:0":t.positions),n=(this.callback=t.callback,this.accessreset=e.getAttribute("data-tb-cvd-accessreset"),null===this.accessreset&&(this.accessreset="Effacer la saisie du mot de passe"),this.maxlength=e.getAttribute("maxlength"),null===this.maxlength?this.maxlength=6:this.maxlength=parseInt(this.maxlength),e.hasAttribute("data-tb-cvd-positions")&&(i=e.getAttribute("data-tb-cvd-positions")),this.digits=i.split(",").sort(function(t,e){return parseInt(t.split(":")[0])-parseInt(e.split(":")[0])}).map(function(t){return parseInt(t.split(":")[1],10)}),this.$input=f.$(e),this.$container=this.$input.parents(".tb-container-cvdPsw"),r);if(!n.$container.hasClass("--injected")){var a,s=f.$("[data-tb-cvd-keys]"),o=(0===s.find("button").length&&(l="",l=(l=(l=(l=(l=(l=(l=(l=(l=(l+="<button type='button'>"+n.digits[0]+"</button>")+"<button type='button'>"+n.digits[1]+"</button>")+"<button type='button'>"+n.digits[2]+"</button>")+"<button type='button'>"+n.digits[3]+"</button>")+"<button type='button'>"+n.digits[4]+"</button>")+"<button type='button'>"+n.digits[5]+"</button>")+"<button type='button'>"+n.digits[6]+"</button>")+"<button type='button'>"+n.digits[7]+"</button>")+"<button type='button'>"+n.digits[8]+"</button>")+"<span></span><button type='button'>"+n.digits[9]+"</button>",s.html(l+="<span></span>")),setTimeout(function(){s.find("button").addClass("tb-btn-k --medium")},25),f.$("<span>"));for(o.addClass("puces"),o.setAttribute("aria-hidden","true"),a=0;a<n.maxlength;a++){var d=f.$("<span>");d.addClass("puce"),o.append(d)}n.$input.parents(".tb-container-cvdPsw .relative").append(o),n.$input.setAttribute("hidden","");var l=f.$("<div>");l.setAttribute("data-tb-aria",""),l.setAttribute("aria-atomic","true"),l.addClass("visually-hidden access-text"),l.html(""),n.$container.append(l),n.$container.hasClass("--reset")&&((t=f.$("<button>")).addClass("flex-container flex-align-center flex-center --reset"),t.setAttribute("id","reset-"+n.id),t.setAttribute("type","button"),t.setAttribute("data-lien-user","actif"),(i=f.$("<span>")).setAttribute("data-icon","tb-reset"),i.setAttribute("aria-hidden","true"),(l=f.$("<span>")).addClass("visually-hidden access-text"),l.html(n.accessreset),t.append(i),t.append(l),n.$container.append(t)),n.$container.addClass("--injected")}this.$aria=this.$container.find("[data-tb-aria]"),this.$formfield=this.$input.parents("[data-tb-form-field]"),this.$reset=this.$container.find("button"),this.$reset.setListener("mousedown",function(t){r.$formfield.removeClass("hide-focus"),1===t.detail&&r.$formfield.addClass("hide-focus"),p(r)}),this.$reset.setListener("keydown",function(t){13!==t.keyCode&&13!==t.which&&32!==t.keyCode&&32!==t.which||p(r),40!==t.keyCode&&40!==t.which||f.$("[data-tb-index='0']").get(0).focus()});var e=f.$().find("[data-tb-cvd-id='"+r.id+"'] button"),u=-1;e.each(function(t){u++,t.setAttribute("data-tb-index",u),t.setListener("click",function(t){var e,i,n,a,s;f.$().find(".jq-aria-live").remove(),e=r,i=this,(n=f.$(i)).addClass("active"),setTimeout(function(){n.removeClass("active")},300),(a=e.$input.val()).length<e.maxlength&&(a+=i.getAttribute("data-tb-index"),e.$input.val(a)),void 0!==e.callback&&e.callback(h(e)),a.length===e.maxlength&&e.$input.trigger("tbCvdPsw",{id:e.id,action:"codepin",value:a,positions:h(e)}),e.$container.removeClass("--empty"),e.$reset.removeAttribute("hidden"),i=e.$container.find(".puce"),(s=e.$container.find('.puce[class*="--select"]').length)<=e.maxlength&&i.eq(s).addClass("--select"),setTimeout(function(){e.$input.trigger("tbCvdPsw",{id:e.id,action:"digit",index:n.getAttribute("data-tb-index")});var t=" chiffre saisi sur ",t=(1<a.length&&(t=" chiffres saisis sur "),""+a.length+t+e.maxlength);a.length===e.maxlength&&(t+=", mot de passe complet"),e.$aria.setAttribute("aria-live","polite"),e.$aria.html("<p>"+t+"</p>"),c(e)},100)}),t.setListener("mousedown",function(t){r.$formfield.removeClass("hide-focus"),1===t.detail&&r.$formfield.addClass("hide-focus")}),t.setListener("keydown",function(t){r.$input.trigger("tbCvdPsw",{action:"nav",keyCode:t.keyCode,code:t.code}),f.$().find(".jq-aria-live").remove(),40!==t.keyCode&&40!==t.which||((u=+f.$(t.target).getAttribute("data-tb-index"))<9&&f.$("[data-tb-index='"+(u+1)+"']").get(0).focus(),9===u&&1===r.$valider.length&&r.$valider.get(0).focus()),38!==t.keyCode&&38!==t.which||(0<(u=+f.$(t.target).getAttribute("data-tb-index"))&&f.$("[data-tb-index='"+(u-1)+"']").get(0).focus(),0===u&&r.$reset.isVisible()&&r.$reset.get(0).focus())})}),r.$formfield.setListener("touchstart",function(t){r.$formfield.addClass("hide-focus")}),r.$formfield.setListener("keydown",function(t){r.$formfield.removeClass("hide-focus")}),r.$formfield.setListener("keyup",function(t){var e;r.$input.trigger("tbCvdPsw",{action:"nav",keyCode:t.keyCode,code:t.code}),("Digit0"<=t.code&&t.code<="Digit9"||"Numpad0"<=t.code&&t.code<="Numpad9")&&(e=Math.floor(1e3*Math.random()),f.$("body").append("<p id='jq-aria-live-"+e+"' class='jq-aria-live visually-hidden' role='alert'></p>"),f.$("#jq-aria-live-"+e).text(r.$label.getAttribute("data-tb-cvd-alert"))),35!==t.keyCode&&35!==t.which||1===r.$valider.length&&r.$valider.get(0).focus(),36!==t.keyCode&&36!==t.which||("error"===r.$formfield.getAttribute("data-tb-form-field")?r.$formfield.find("[data-ad-messages]").get(0).focus():1===r.$label.length&&r.$label.get(0).focus())}),this.$label=this.$formfield.find("[data-tb-cvd-label]"),1===this.$label.length&&this.$label.setListener("keydown",function(t){r.$input.trigger("tbCvdPsw",{action:"nav",keyCode:t.keyCode,code:t.code}),f.$().find(".jq-aria-live").remove(),40!==t.keyCode&&40!==t.which||f.$("[data-tb-index='0']").get(0).focus()}),this.$errors=this.$formfield.find("[data-ad-messages]"),1===this.$errors.length&&this.$errors.setListener("keydown",function(t){r.$input.trigger("tbCvdPsw",{action:"nav",keyCode:t.keyCode,code:t.code}),40!==t.keyCode&&40!==t.which||f.$("[data-tb-index='0']").get(0).focus()}),this.$valider=f.$().find("[data-tb-cvd-valider]"),1===this.$valider.length&&(this.$valider.setListener("keydown",function(t){var e;r.$input.trigger("tbCvdPsw",{action:"nav",keyCode:t.keyCode,code:t.code}),("Digit0"<=t.code&&t.code<="Digit9"||"Numpad0"<=t.code&&t.code<="Numpad9")&&(e=Math.floor(1e3*Math.random()),f.$("body").append("<p id='jq-aria-live-"+e+"' class='jq-aria-live visually-hidden' role='alert'></p>"),f.$("#jq-aria-live-"+e).text(r.$valider.getAttribute("data-tb-cvd-alert"))),38!==t.keyCode&&38!==t.which||f.$("[data-tb-index='9']").get(0).focus()}),this.$valider.setListener("keyup",function(t){r.$input.trigger("tbCvdPsw",{action:"nav",keyCode:t.keyCode,code:t.code}),36!==t.keyCode&&36!==t.which||("error"===r.$formfield.getAttribute("data-tb-form-field")?r.$formfield.find("[data-ad-messages]").get(0).focus():1===r.$label.length&&r.$label.get(0).focus())})),this.$input.addClass("--ready"),this.$container.addClass("--empty"),this.$reset.setAttribute("hidden","true"),p(r),setTimeout(function(){var t={};t.id=r.id,t.action="ready",null!==r.$input.getAttribute("formControlName")&&(t.formControlName=r.$input.getAttribute("formControlName")),r.$input.trigger("tbCvdPsw",t)},25)},e}}),function(t,e){"use strict";"object"==typeof exports?module.exports=e:t.tbDatePickerService=e(t.JQ)}(this,function(v){return function(){"use strict";var c={};function n(t,e,i){e=v.$(e);h(t,""+(parseInt(u(0,e))+i))}function a(t,e){v.$(e).hasAttribute("disabled")||v.$(e).hasClass("--empty")||"&nbsp;"!==(e=u(0,v.$(e)))&&(h(t,e,!0),l(t)?(t.$today.disable(),t.$today.setAttribute("tabindex","-1")):(t.$today.enable(),t.$today.setAttribute("tabindex","0")),"days"!==t.mode||!t.autoclose&&"inline"!==t.view&&"popup"!==t.view||g(t),"years"===t.mode)&&function(t){var e=parseInt(t.$datePicker.find("td[aria-current]").get(0).innerText);t.mode="days",t.$datePicker.setAttribute("data-tb-datepicker","days"),e!==t.jsonCalendar.aaaa?(t.jsonCalendar=c.jsonDate(new Date(e,t.jsonCalendar.mm-1,t.jsonCalendar.jj)),t.jsonDateSelect=t.jsonCalendar,setTimeout(function(){r(t,t.jsonCalendar)}.bind(this),10)):(t.jsonDateSelect=t.jsonCalendar,r(t,t.jsonDateSelect));t.$valider.removeAttribute("disabled")}(t)}function l(t){return t.jsonDateDuJour.aaaa===t.jsonDateSelect.aaaa&&t.jsonDateDuJour.mm===t.jsonDateSelect.mm&&t.jsonDateDuJour.jj===t.jsonDateSelect.jj&&t.jsonCalendar.aaaa===t.jsonDateDuJour.aaaa&&t.jsonCalendar.mm===t.jsonDateDuJour.mm}function u(t,e){return e.find("span").html()}function p(t,e,i){var n;e.find("span").html(i),e.setAttribute("aria-label",""),e.setAttribute("data-tb-datepicker-day",""),e.addClass("--empty"),e.enable(),e.find("input").enable(),"&nbsp;"!==i&&(e.removeClass("--empty"),e.setAttribute("data-tb-datepicker-day",i),"days"===t.mode&&(n=c.jsonDate(new Date(t.jsonCalendar.aaaa,t.jsonCalendar.mm-1,i)),e.setAttribute("aria-label",n.jour+" "+i+" "+n.mois+" "+n.aaaa),n.fr===t.jsonDateInitiale.fr&&(e.addClass("tb-datepicker-initial"),e.find("input").setAttribute("checked","true"),e.setAttribute("aria-current","true")),n.date<t.jsonDateMin.date&&s(0,e,t.$prev),n.date>t.jsonDateMax.date)&&s(0,e,t.$next),"years"===t.mode)&&(e.setAttribute("aria-label",i),i===t.jsonDateInitiale.aaaa&&(e.addClass("tb-datepicker-initial"),e.find("input").setAttribute("checked","true"),e.setAttribute("aria-current","true")),i<t.jsonDateMin.aaaa&&s(0,e,t.$prev),i>t.jsonDateMax.aaaa)&&s(0,e,t.$next)}function h(i,n,a){var s=!1;void 0===n&&(n=""),void 0===a&&(a=!1),i.$allDays.each(function(t){var e;!1!==s||"&nbsp;"===(e=u(0,t))||t.hasAttribute("disabled")||(""===n||""!==n&&n===e)&&(!0===a&&(i.jsonDateSelect=c.jsonDate(new Date(i.jsonCalendar.aaaa,i.jsonCalendar.mm-1,n)),i.$allDays.find("input").removeAttribute("checked"),i.$allDays.removeAttribute("aria-current"),t.find("input").setAttribute("checked","true"),t.setAttribute("aria-current","true")),i.$allDays.setAttribute("tabindex","-1"),t.setAttribute("tabindex","0"),s=!0,setTimeout(function(){t.focus()}.bind(this),10))})}function s(t,e,i){e.disable(),e.find("input").disable(),i.setAttribute("tabindex","-1"),i.setAttribute("disabled","disabled")}function r(i,n){(d=i).$allDays.removeClass("tb-datepicker-initial"),d.$allDays.removeAttribute("aria-current"),d.$allDays.setAttribute("tabindex","-1"),d.$allDays.find("input").enable(),d.$allDays.find("input").removeAttribute("checked"),d.$prev.removeAttribute("disabled"),d.$prev.setAttribute("tabindex","0"),d.$next.setAttribute("tabindex","0"),d.$next.removeAttribute("disabled");var a,t,e,s,r,o,d="";"days"===i.mode&&(0===(a=n.first)&&(a=7),s=1,i.$allDays.each(function(t){var e="&nbsp;";a<=s&&(e=s-a+1)>n.nbdays&&(e="&nbsp;"),p(i,t,e),s++}),e=c.jsonDate(new Date(i.jsonCalendar.aaaa,i.jsonCalendar.mm-2,1)),t=c.jsonDate(new Date(i.jsonCalendar.aaaa,i.jsonCalendar.mm,1)),i.$prev.setAttribute("aria-label","Mois précédent ("+e.mois+" "+e.aaaa+")"),i.$next.setAttribute("aria-label","Mois suivant ("+t.mois+" "+t.aaaa+")"),i.$month.html(n.mois+" "),i.$year.find("span").html(n.aaaa),(e=i).jsonCalendar.aaaa===e.jsonDateSelect.aaaa)&&e.jsonCalendar.mm===e.jsonDateSelect.mm&&(d=""+i.jsonDateSelect.jj),"years"===i.mode&&(s=i.yearPivot-20,i.$allDays.each(function(t){p(i,t,s+1),s++}),r=(s=i.yearPivot-20)+1,o=s+42,i.$allDays.each(function(t){t=parseInt(u(0,t));t<i.jsonDateMin.aaaa&&(r=i.jsonDateMin.aaaa),t>i.jsonDateMax.aaaa&&(o=i.jsonDateMax.aaaa)}),i.$prev.setAttribute("aria-label","Années précédentes à "+r),i.$next.setAttribute("aria-label","Années suivantes à "+o),i.$month.html(""),i.$year.find("span").html(r+" - "+o),i.$year.setAttribute("aria-label","Années de "+r+" à "+o),i.jsonDateSelect.aaaa>=r&&i.jsonDateSelect.aaaa<=o&&(d=""+i.jsonDateSelect.aaaa),i.$today.disable()),h(i,d),l(i)||"years"===i.mode?i.$today.disable():i.$today.enable()}function o(t){var e,i;t.$prev.hasAttribute("disabled")||("days"===t.mode&&(e=t.jsonCalendar.aaaa,i=t.jsonCalendar.mm-1,t.jsonCalendar=c.jsonDate(new Date(e,i-1,1)),r(t,t.jsonCalendar)),"years"===t.mode&&(t.yearPivot-=42,r(t,t.jsonCalendar)))}function d(t){var e,i;t.$next.hasAttribute("disabled")||("days"===t.mode&&(e=t.jsonCalendar.aaaa,i=t.jsonCalendar.mm-1,t.jsonCalendar=c.jsonDate(new Date(e,1+i,1)),r(t,t.jsonCalendar)),"years"===t.mode&&(t.yearPivot+=42,r(t,t.jsonCalendar)))}function f(t,e){t.jsonDateSelect=c.jsonDate(e),t.jsonCalendar=c.jsonDate(e),r(t,t.jsonDateSelect)}function g(t){var e;0<t.$input.length&&(t.$input.val(t.jsonDateSelect.fr),e=t.$input.get(0),v.$(e).trigger("change"),t.$input.setAttribute("data-tb-value",t.jsonDateSelect.fr)),!t.autoclose&&"popin"!==t.view&&"lightbox"!==t.view||"inline"===t.view||b(t)}function m(t){"days"===t.mode?(t.mode="years",t.$valider.setAttribute("disabled","disabled")):(t.mode="days",t.$valider.removeAttribute("disabled")),t.$datePicker.setAttribute("data-tb-datepicker",t.mode),setTimeout(function(){r(t,t.jsonCalendar)}.bind(this),10)}function b(t,e){t.$datePicker.hasClass("is-hidden")||(void 0===e&&(e=!0),t.$datePicker.addClass("is-hidden"),"lightbox"===t.view&&v.$(t.masque).removeClass("masque"),1<=t.$button.length&&t.$button.setAttribute("aria-expanded","false"),!0===e&&(t.$input.focus(),"date"!==t.$input.getAttribute("type"))&&(t.$input.get(0).selectionStart=0,t.$input.get(0).selectionEnd=0),t.$input.trigger("tbInputField",{id:t.input,type:"date",action:"datepicker-hide"}))}return c.$datePicker,c.$input,c.$button,c.$header,c.$fermer,c.$valider,c.$today,c.$prev,c.$next,c.$allDays,c.$month,c.$year,c.masque,c.autoclose,c.view,c.position,c.today,c.input,c.lastWidth,c.jsonDateDuJour,c.jsonDateSelect,c.jsonDateInitiale,c.jsonCalendar,c.jsonDateMin,c.jsonDateMax,c.yearPivot,c.mode,c.jsonDate=function(t){var e;return"number"==typeof(t="string"==typeof(t=null==t?new Date:t)&&""===t?new Date:t)&&((e=new Date).setTime(t),t=e),"string"==typeof t&&(t.startsWith("-")||t.startsWith("+")||"0"===t)&&(e=parseInt(t),(t=new Date).setDate(t.getDate()+e)),"string"==typeof t&&(0<t.indexOf("/")&&(t=(e=t.split("/"))[2]+"-"+e[1]+"-"+e[0]),t=new Date(t)),(t=t instanceof Date?t:new Date).setHours(0,0,0,0),{date:t,jj:parseInt(t.format("j")),mm:parseInt(t.format("n")),aaaa:parseInt(t.format("Y")),fr:t.fr(),en:t.en(),jour:t.format("l"),mois:t.format("F"),nbdays:t.format("t"),day:t.en(),first:parseInt(t.format("Z")),bissextile:"1"===t.format("L"),isvalid:t.getTime()===t.getTime()}},c.get=function(t,e){return void 0===t&&(t="fr"),v.$("#"+(e=void 0===e?"tbi-datepicker":e)).getAttribute("data-tb-datepicker-"+t)},c.open=function(t){var e,s=this,i=((t="object"!=typeof t?{}:t).input=void 0===t.field?null:t.field,null===t.input&&(t.input=void 0===t.input?null:t.input),t.title=void 0===t.title?"":t.title,t.autoclose=void 0!==t.autoclose&&t.autoclose,t.inline=void 0!==t.inline&&t.inline,t.view=void 0===t.view?"popin":t.view,t.min=void 0===t.min?null:t.min,t.max=void 0===t.max?null:t.max,t.position=void 0===t.position?"bottom":t.position,t.masque=void 0===t.masque?"":t.masque,t.mode=void 0===t.mode?"days":t.mode,t.yearpicker=void 0!==t.yearpicker&&t.yearpicker,!0===t.inline&&(t.view="inline"),void 0===t.today&&(t.today=!1,"popin"===t.view)&&(t.today=!0),t.target),i=(void 0===i&&(i="tbi-datepicker","popup"===t.view&&(i+="-popup"),"inline"===t.view)&&(i+="-inline"),v.$("#"+i)),r=(t.iconprev="tb-calendar-prev",t.iconnext="tb-calendar-next",""===t.title&&(e="label[for*='"+t.input+"']",0<(e=v.$(e)).length)&&(e.hasAttribute("data-tb-datepicker-title")?t.title=e.getAttribute("data-tb-datepicker-title"):t.title=e.get(0).innerHTML.split("<")[0]),i.isEmpty()&&i.html(function(){for(var t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t="")+'<div data-tb-datepicker class="is-hidden safe-area-bottom safe-area-top flex-container--column overflow-hidden" tabindex="0" role="dialog" aria-modal="true">'+'<div data-tb-datepicker-header class="flex-container flex-align-center">')+"    <h2 data-tb-datepicker-title></h2>"+'\t\t<button tabindex="0" data-tb-datepicker-fermer class="tb-closeX-btn tb-closeX-pos" type="button">')+'\t\t\t<span class="visually-hidden access-text">Fermer le calendrier</span>'+"\t\t</button>")+"</div>"+'<div class="flex-item-fluid flex-container--column --fix-ms">')+'<table role="grid" data-tb-datepicker-content>'+"<thead>")+"<tr>"+'<td colspan="7">')+' <div data-tb-datepicker-navigation class="flex-container flex-align-center">'+'   <button data-tb-datepicker-prev  type="button" tabindex="0" class="flex-container flex-align-center flex-center --size24px" aria-label="suivant">')+"   </button>"+'\t<div data-tb-datepicker-titre class="flex-item-fluid" aria-label="titre">')+'       <div class="flex-center flex-container--row">'+'       \t<span data-tb-datepicker-mois class="flex-container flex-align-center"></span>&nbsp;')+'       \t<button data-tb-datepicker-annee type="button" tabindex="0" class="flex-container flex-align-center"><span class="tb-tag"></span></button>'+'       \t<div data-tb-datepicker-annee class="flex-container flex-align-center"><span></span></div>')+"       </div>"+"   </div>")+'   <button data-tb-datepicker-next  type="button" tabindex="0" class="flex-container flex-align-center flex-center --size24px" aria-label="suivant">'+"   </button>")+" </div>"+"</td>")+"</tr>"+"<tr>")+'<th data-tb-datepicker-jsem class="txtcenter" aria-hidden="true"><span>Lun</span></th>'+'<th data-tb-datepicker-jsem class="txtcenter" aria-hidden="true"><span>Mar</span></th>')+'<th data-tb-datepicker-jsem class="txtcenter" aria-hidden="true"><span>Mer</span></th>'+'<th data-tb-datepicker-jsem class="txtcenter" aria-hidden="true"><span>Jeu</span></th>')+'<th data-tb-datepicker-jsem class="txtcenter" aria-hidden="true"><span>Ven</span></th>'+'<th data-tb-datepicker-jsem class="txtcenter" aria-hidden="true"><span>Sam</span></th>')+'<th data-tb-datepicker-jsem class="txtcenter" aria-hidden="true"><span>Dim</span></th>'+"</tr>")+"</thead>"+"<tbody>",e=0;e<6;e++)t+='<tr><td data-tb-datepicker-day><div class="flex-align-center flex-center flex-container flex-item-center"><input type="radio" name="day" /><span aria-hidden="true"></span></div></td><td data-tb-datepicker-day><div class="flex-align-center flex-center flex-container flex-item-center"><input type="radio" name="day" /><span aria-hidden="true"></span></div></td><td data-tb-datepicker-day><div class="flex-align-center flex-center flex-container flex-item-center"><input type="radio" name="day" /><span aria-hidden="true"></span></div></td><td data-tb-datepicker-day><div class="flex-align-center flex-center flex-container flex-item-center"><input type="radio" name="day" /><span aria-hidden="true"></span></div></td><td data-tb-datepicker-day><div class="flex-align-center flex-center flex-container flex-item-center"><input type="radio" name="day" /><span aria-hidden="true"></span></div></td><td data-tb-datepicker-day><div class="flex-align-center flex-center flex-container flex-item-center"><input type="radio" name="day" /><span aria-hidden="true"></span></div></td><td data-tb-datepicker-day><div class="flex-align-center flex-center flex-container flex-item-center"><input type="radio" name="day" /><span aria-hidden="true"></span></div></td></tr>';return t=(t=(t=(t=(t+="</tbody>")+"</table>"+"</div>")+"  <div data-tb-datepicker-buttons>"+'\t\t<button tabindex="0"  data-tb-datepicker-today type="button" class="tb-btn-s --small" data-lien-user="actif">Aujourd\'hui</button>')+' \t    <button tabindex="0" data-tb-datepicker-valider type="button" class="tb-btn-p --small" data-lien-user="actif">Valider</button>'+"  </div>")+"</div>"+'<div id="tbi-calendar"></div>'}()),this.autoclose=t.autoclose,this.today=t.today,this.view=t.view,this.position=t.position,this.input=t.input,this.masque=t.masque,this.mode=t.mode,this.$input=v.$("#"+t.input,"input"),this.$input.val());r.isDate()||(r=""),this.$button=this.$input.siblings('[class*="--datepicker"]'),null===t.min&&(t.min=this.$input.getAttribute("min")),null===t.min&&(t.min="01/01/1900"),null===t.max&&(t.max=this.$input.getAttribute("max")),null===t.max&&(t.max="31/12/2099"),this.jsonDateDuJour=c.jsonDate(),this.jsonDateMin=c.jsonDate(t.min),this.jsonDateMax=c.jsonDate(t.max),this.$datePicker=i.find("[data-tb-datepicker]"),this.$today=i.find("[data-tb-datepicker-today]"),this.$header=i.find("[data-tb-datepicker-header]"),this.$fermer=i.find("[data-tb-datepicker-fermer]"),this.$valider=i.find("[data-tb-datepicker-valider]"),this.$prev=i.find("[data-tb-datepicker-prev]"),this.$month=i.find("[data-tb-datepicker-mois]"),this.$year=i.find("[data-tb-datepicker-annee]"),this.$next=i.find("[data-tb-datepicker-next]"),this.$allDays=i.find("[data-tb-datepicker-day]"),this.$datePicker.setAttribute("data-tb-datepicker",this.mode),this.$datePicker.addClass("--"+t.view),!0===t.yearpicker?this.$datePicker.addClass("--yearpicker"):i.find("button[data-tb-datepicker-annee]").remove(),!0===t.today?this.$datePicker.addClass("--today"):this.$today.remove(),"popin"!==t.view&&(this.$header.remove(),this.$valider.remove()),0<t.title.length&&i.find("[data-tb-datepicker-title]").html(t.title),this.$prev.setAttribute("data-icon",t.iconprev),this.$next.setAttribute("data-icon",t.iconnext),this.$datePicker.setListener("keydown",function(t){switch(t.keyCode){case 9:i=t,e=(e=s).$datePicker.find("[tabindex*='0']"),n=i.target,a=e.indexOf(n),!1===i.shiftKey&&(n=e[a+1]||e[0]),(n=!0===i.shiftKey?e[a-1]||e[e.length-1]:n).focus(),t.preventDefault();break;case 27:("years"===s.mode?m:b)(s),t.preventDefault();break;case 33:o(s),t.preventDefault();break;case 34:d(s),t.preventDefault()}var e,i,n,a}),this.$prev.setListener("keydown",function(t){switch(t.keyCode){case 13:case 32:o(s),t.preventDefault()}}),this.$next.setListener("keydown",function(t){switch(t.keyCode){case 13:case 32:d(s),t.preventDefault()}}),!0===t.yearpicker&&(this.$year.setListener("keydown",function(t){switch(t.keyCode){case 13:case 32:m(s),t.preventDefault()}}),this.$year.setListener("click",function(){m(s)})),this.$allDays.setListener("keydown",function(t){switch(t.keyCode){case 13:case 32:a(s,this),t.preventDefault();break;case 37:n(s,this,-1),t.preventDefault();break;case 38:n(s,this,-7),t.preventDefault();break;case 39:n(s,this,1),t.preventDefault();break;case 40:n(s,this,7),t.preventDefault()}}),this.$prev.setListener("click",function(t){o(s),t.preventDefault()}),this.$next.setListener("click",function(t){d(s),t.preventDefault()}),this.$allDays.setListener("click",function(t){a(s,this),t.preventDefault()}),0<this.$fermer.length&&this.$fermer.setListener("click",function(){b(s)}),0<this.$today.length&&this.$today.setListener("click",function(){var t;f(t=s,t.jsonDateDuJour.fr),!t.autoclose&&"inline"!==t.view&&"popup"!==t.view||g(t)}),0<this.$valider.length&&this.$valider.setListener("click",function(){g(s)}),s.lastWidth=window.innerWidth,window.addEventListener("resize",function(){window.innerWidth!==s.lastWidth&&b(s,!1)}),this.jsonDateInitiale=c.jsonDate(r),this.yearPivot=this.jsonDateInitiale.aaaa,f(s,r),"popup"===t.view&&v.$("body").setListener("click",function(t){var e;t=t,"popup"!==(e=s).view||e.$datePicker.get(0).contains(t.target)||b(e,!1)}),"lightbox"===t.view&&(""===this.masque&&(this.masque="body"),v.$(this.masque).addClass("masque")),setTimeout(function(){var t,e,i,n,a;s.jsonDateInitiale=c.jsonDate(r),s.jsonDateInitiale.isvalid||(s.jsonDateInitiale=c.jsonDate(),r=s.jsonDateInitiale.fr),null!==s.jsonDateMin&&s.jsonDateInitiale.date<s.jsonDateMin.date&&(s.jsonDateInitiale=s.jsonDateMin,r=s.jsonDateInitiale.fr),null!==s.jsonDateMax&&s.jsonDateInitiale.date>s.jsonDateMax.date&&(s.jsonDateInitiale=s.jsonDateMax,r=s.jsonDateInitiale.fr),s.yearPivot=s.jsonDateInitiale.aaaa,f(s,r),t=s,v.$("[data-tb-datepicker]").addClass("is-hidden"),t.lastWidth=window.innerWidth,t.$datePicker.removeClass("is-hidden"),t.$datePicker.get(0).focus(),"popup"===t.view&&(e=t.$input.width()+4,i=0,"bottom"===t.position&&(e=0,i=t.$input.height()+4),"top"===t.position&&(e=0,i=-1*(t.$datePicker.height()+4)),t.$datePicker.addClass("--"+t.position),t.$datePicker.css({left:e+"px",top:i+"px"}),a=(n=t.$datePicker.get(0).getBoundingClientRect()).top,n.bottom,t.$datePicker.css({left:e+"px",top:(i=a<0?i-a+4:i)+"px"}),setTimeout(function(){document.getElementById("tbi-calendar").scrollIntoView({behavior:"smooth"})},0)),1<=t.$button.length&&t.$button.setAttribute("aria-expanded","true"),t.$input.trigger("tbInputField",{id:t.input,type:"date",action:"datepicker-show"})}.bind(this),50)},c.associate=function(l){var u;(l="object"!=typeof l?{}:l).element=void 0===l.element?null:l.element,null!==l.element&&(u=v.$(l.element).parent()).hasClass("--datepicker")&&l.element.addEventListener("tbOpenDatePicker",function(t){var e,i,n,a,s,r,o,d=v.$(l.element).getAttribute("id");d===t.detail.id&&(u.hasClass("--popup")||u.hasClass("--popin")||u.hasClass("--smartphone-popin")||u.hasClass("--tiny-popin")||u.hasClass("--small-popin")||u.hasClass("--lightbox")||u.hasClass("--inline"))&&(e="popup",u.hasClass("--popin")&&(e="popin"),u.hasClass("--inline")&&(e="inline"),u.hasClass("--lightbox")&&(e="lightbox"),u.hasClass("--smartphone-popin")&&v.$("body").hasClass("device-smartphone")&&(e="popin"),u.hasClass("--tiny-popin")&&"tiny"===(i=v.$().media())&&(e="popin"),d+="-"+(e=!u.hasClass("--small-popin")||"tiny"!==(i=v.$().media())&&"small"!==i?e:"popin"),i=!1,u.hasClass("--yearpicker")&&(i=!0),n="popin"===e?!1:!0,a=void(u.hasClass("--noautoclose")&&(n=!1)),u.hasClass("--today")&&(a=!0),u.hasClass("--notoday")&&(a=!1),s="bottom",u.hasClass("--top")&&(s="top"),u.hasClass("--right")&&(s="right"),null===document.getElementById(d+"-datepicker")&&(null!==(r=v.$(".tb-wrapper-main"))&&0!==r.length||(r=v.$()),"popup"===e&&(r=u.parent()),(o=document.createElement("div")).setAttribute("id",d+"-datepicker"),r.get(0).appendChild(o)),c.open({target:d+"-datepicker",field:t.detail.id,view:e,position:s,today:a,autoclose:n,yearpicker:i}))})},c}}),function(t,e){"use strict";"object"==typeof exports?module.exports=e:t.tbErreurService=e(t.JQ)}(this,function(l){"use strict";var u={saveDescribedBy:function(t){0<t.length&&t.each(function(t){var e;!1===t.hasAttribute("aria-labelledby")&&!1===t.hasClass("--savearia")&&(t.addClass("--savearia"),null!==(e=t.getAttribute("aria-describedby")))&&t.setAttribute("savearia",e)})},setAriaDescribedBy:function(t,a,s){0<t.length&&t.each(function(t){var e,i,n;!1===t.hasAttribute("aria-labelledby")&&(i=s,t.removeAttribute(e="aria-describedby"),n=t.getAttribute("savearia"),!0===a?null!==i&&null!==n&&(i+=" "+n):null!==n&&(i=n),null!==i)&&!0!==t.hasClass("no-aria-describedby")&&t.setAttribute(e,i)})},setAriaInvalid:function(t,e,i){0<t.length&&t.each(function(t){t.removeAttribute("aria-invalid"),!0===e&&!0===i&&t.setAttribute("aria-invalid","true")})},validateFields:function(t){var o=void 0===(t="object"!=typeof t?{}:t).focus||t.focus,d=void 0===t.invalid||t.invalid;l.$("[data-tb-form-field]").setAttribute("data-tb-form-field",""),l.$("[data-tb-form-message]").setAttribute("data-tb-form-message",""),l.$("[data-ad-messages]").each(function(t){var e=!1,i=t.getAttribute("data-ad-messages"),n=l.$("#"+i),a=n.parents("[data-tb-form-field]").eq(0),i=a.find("input[name]:not([id="+i+"])"),s=(u.saveDescribedBy(n),u.saveDescribedBy(i),0<n.length&&n.get(0).offsetWidth,t.parents("[data-tb-form-message]").eq(0)),r=(0<s.length&&""===(r=s.find("[data-icon]")).getAttribute("data-icon")&&r.setAttribute("data-icon","tb-erreur"),t.hasClass("is-hidden")||(a.setAttribute("data-tb-form-field","error"),s.setAttribute("data-tb-form-message","error"),!0===o&&(o=!1,0<n.length)&&n.get(0).focus(),e=!0),t.getAttribute("error-describedby"));u.setAriaDescribedBy(n,e,r),u.setAriaDescribedBy(i,e,r),u.setAriaInvalid(n,e,d),u.setAriaInvalid(i,e,d)})},validateFormFields:function(t){var e;!0===(void 0!==(t="object"!=typeof t?{}:t).nowait&&t.nowait)?this.validateFields(t):(e=this,setTimeout(function(){e.validateFields(t)},5))},findMessages:function(t){var e,i;return null==t||""===t?l.$("[data-ad-messages]"):((e=l.$("[data-ad-messages="+t+"]")).length<=0&&0<(i=l.$("#"+t)).length&&(t=i.parents("[data-tb-form-field]").eq(0).getAttribute("data-tb-form-id"),e=l.$("[data-ad-messages="+t+"]")),e)},setMessage:function(t){var i,n,e=(t="object"!=typeof t?{}:t).field||"",a=t.rg||"",s=void 0===t.show||t.show,r=t.text||"";this.resetMessages(t),""!==e&&((i=this.findMessages(e)).removeClass("is-hidden"),i.removeAttribute("hidden"),""!==a)&&(n=a.split(" ")).forEach(function(t){var e,t=i.find("[data-ad-message='"+t+"']");!0===s&&(t.removeClass("is-hidden"),t.removeAttribute("hidden"),null===(e=i.getAttribute("error-describedby"))&&(e=""),e+=" "+t.getAttribute("id"),i.setAttribute("error-describedby",e.trim()),1===n.length)&&0<r.length&&t.html(r)})},resetMessages:function(t){t=(t="object"!=typeof t?{}:t).field||"",this.reset(),t=this.findMessages(t);t.removeAttribute("error-describedby"),t.removeClass("is-hidden"),t.removeAttribute("hidden"),t.addClass("is-hidden"),t.setAttribute("hidden","hidden"),t.find("[data-ad-message]").removeClass("is-hidden"),t.find("[data-ad-message]").removeAttribute("hidden"),t.find("[data-ad-message]").addClass("is-hidden"),t.find("[data-ad-message]").setAttribute("hidden","hidden")},showError:function(t){this.resetMessages(),this.setMessage(t),this.validateFormFields(t)},hideError:function(t){this.resetMessages(t),this.validateFormFields(t)},resetErrors:function(){this.resetMessages(),this.validateFormFields()},reset:function(){l.$("[data-ad-messages]").each(function(t){var i=t.getAttribute("data-ad-messages");null!==i&&""!==i||(i=t.parents("[data-tb-form-field]").eq(0).getAttribute("data-tb-form-id"),t.setAttribute("data-ad-messages",i)),t.find("[data-ad-message]").each(function(t){var e;!1===t.hasAttribute("id")&&(e=t.getAttribute("data-ad-message"),t.setAttribute("id",i+"-"+e))})})}};return u}),function(t,e){"use strict";"object"==typeof exports?module.exports=e:t.tbInputFieldService=e(t.JQ)}(this,function(w){return function(){"use strict";var d={};function l(t,e,i){return void 0===i&&(i=t._defaut),t[e]||i}function u(t,e,i,n){var a;return t.$container.hasClass(e)?((a=document.createElement("button")).className="flex-container flex-align-center flex-center "+e,a.setAttribute("data-lien-user","actif"),a.setAttribute("type","button"),a.setAttribute("data-lien-user","actif"),a.innerHTML='<span class="visually-hidden access-text">'+n+"</span>","--password"===e&&(a.setAttribute("data-tb-show",i),a.setAttribute("data-tb-hide",i+"-blocked")),"--datepicker"===e&&(a.setAttribute("tabindex","-1"),a.setAttribute("aria-hidden","true")),a.innerHTML='<span data-tb-inputfield-icon data-icon="'+i+'" class="flex-center flex-align-center '+e+'" aria-hidden="true"></span>',a.innerHTML+='<span data-tb-inputfield-aria class="visually-hidden access-text">'+n+"</span>",t.$container.get(0).appendChild(a),a):null}function c(t,e){var i=document.createElement("span");i.className=e,i.setAttribute("aria-hidden","true"),i.setAttribute("tabindex","-1"),t.$container.get(0).appendChild(i)}function p(t,e,i){return e>t.length-1?t:t.substr(0,e)+i+t.substr(e+1)}function h(t){return"number"===t.$input.getAttribute("type")?0:t.$input.get(0).selectionStart}function f(t,e,i,n){"number"!==t.$input.getAttribute("type")&&(void 0===i&&(i=e),!0===n?setTimeout(function(){t.$input.get(0).selectionStart=e,t.$input.get(0).selectionEnd=i},0):(t.$input.get(0).selectionStart=e,t.$input.get(0).selectionEnd=i))}function g(t,e){if(!0===t.error)e.stopPropagation(),e.preventDefault();else{a=s="",8===(a=void 0!==(i=e)?i.which||i.keyCode:a)&&(s="Backspace"),9===a&&(s="Tab"),37===a&&(s="ArrowLeft"),38===a&&(s="ArrowUp"),39===a&&(s="ArrowRight"),40===a&&(s="ArrowDown"),46===a&&(s="Delete"),48<=a&&a<=57&&!0===i.shiftKey&&(s=String.fromCharCode(a)),96<=a&&a<=105&&(s=String.fromCharCode(a-48)),65<=a&&a<=90&&(s=String.fromCharCode(a+32)),65<=a&&a<=90&&!0===i.shiftKey&&(s=String.fromCharCode(a)),106!==a&&220!==a||(s="*"),(107===a||187===a&&!0===i.shiftKey)&&(s="+"),109===a&&(s="-"),110!==a&&190!==a||(s="."),111!==a&&191!==a||(s="/");var i=s=168!==a&&188!==a?s:",";if(t.last=t.$input.val(),t.lastkey=i,t.caret=h(t),!(t.error=!1)===e.repeat&&1===i.length)e.stopPropagation(),e.preventDefault();else if(!0===e.shiftKey&&1!==i.length&&"Tab"!==i&&""!==i)e.stopPropagation(),e.preventDefault();else if(!0===e.ctrlKey)e.stopPropagation(),e.preventDefault();else{var n,a=h(t);if("montant"===t.type){if(0<t.suffixinline.length){var s=b(t,t.last);if("ArrowRight"===i&&a>=s.length)return f(t,s.length),e.stopPropagation(),void e.preventDefault();a>s.length&&f(t,s.length)}if("Backspace"===i||"Delete"===i){s=t.last.indexOf(",");if(0<s)if(a-s==("Delete"===i?0:1))return t.$input.val(t.last.substr(0,a)),f(t,a),void("Delete"===i&&(t.$input.trigger("change"),v(t)))}}if(0<t.guide.length){if(1===i.length){if(a!==t.last.length)return e.stopPropagation(),void e.preventDefault();if(t.last.length>=t.guide.length)return e.stopPropagation(),void e.preventDefault()}if("Backspace"===i&&f(t,t.guide.length),"Delete"===i)return e.stopPropagation(),void e.preventDefault()}0<t.mask.length&&("Delete"===i?(t.last[a]!==t.separator[a]&&(n=p(t.last,a,t.separator[a]),t.$input.val(n),t.$input.trigger("change"),n===t.separator)&&(t.$container.removeClass("--empty"),t.$container.addClass("--empty")),f(t,a),e.stopPropagation(),e.preventDefault()):"Backspace"===i?(0<a&&(t.mask[a-1]===t.separator[a-1]?a--:t.last[--a]!==t.separator[a]&&(n=p(t.last,a,t.separator[a]),t.$input.val(n),t.$input.trigger("change"),n===t.separator)&&(t.$container.removeClass("--empty"),t.$container.addClass("--empty")),f(t,a)),e.stopPropagation(),e.preventDefault()):("ArrowLeft"===i&&(0===a&&(a=t.last.length),t.mask[a-1]===t.separator[a-1]&&a--,a--),"ArrowRight"===i&&(t.mask[a+1]===t.separator[a+1]&&a++,++a>t.last.length)&&(a=0),i.startsWith("Arrow")&&(f(t,a),e.stopPropagation(),e.preventDefault())))}}}function m(t,e){!function(t,e){var i=t.$input.val(),n=h(t);""===t.lastkey&&void 0!==e.data&&null!==e.data&&1===e.data.length&&(t.lastkey=e.data);e=t.lastkey||"";if("montant"===t.type||"amount"===t.type){if(","===(e="."===e?",":e))return i=b(t,t.last),0<=(s=i.indexOf(","))?(t.$input.val(i),f(t,s+1)):(""===i&&(i="0"),i+=",",t.$input.val(i),f(t,i.length));i=b(t,i);var a=b(t,t.last);0<(s=(i=","===(i=""===i&&"0"===e?"0":i)?"":i).indexOf(","))&&s<n&&i.length-s==2&&(i+="0"),i.length;i=d.jsonMontant(i).montant,"amount"===t.type&&(i=i.replace(/\./g,"")),s=i.indexOf(","),n<=(s=s<=-1?999:s)&&i.length-a.length==2&&n++,s<n&&i.length-a.length==-2&&n--,1===s&&i.length===a.length&&"0"===a[0]&&"0"!==i[0]&&s<n&&n--,1===s&&"0"===i[0]&&0===n&&n++,(s=i.indexOf(","))<=-1&&i.length>t.maxlength-3&&(i=t.last),t.$input.val(i),f(t,n)}0<t.guide.length&&1===e.length&&(r=t.last,o=t.guide[t.caret],"_"===(a=t.separator[t.caret])?a="":o=t.guide[r.length+1],"0"<=o&&o<="9"&&"0"<=e&&e<=o&&(r+=a+e),"u"===o&&("A"<=e&&e<="Z"||"a"<=e&&e<="z")&&(r+=a+e.toUpperCase()),"l"==o&&("A"<=e&&e<="Z"||"a"<=e&&e<="z")&&(r+=a+e.toLowerCase()),"a"===o&&("A"<=e&&e<="Z"||"a"<=e&&e<="z")&&(r+=a+e),"w"===o&&("A"<=e&&e<="Z"||"a"<=e&&e<="z"||"0"<=e&&e<="9")&&(r+=a+e),e===a&&(r+=a),t.$input.val(r),f(t,(i=r).length));{var s,r,o;0<t.mask.length&&1===e.length&&(s=!1,r=t.last,"0"<=(o=t.mask[t.caret])&&o<="9"&&"0"<=e&&e<=o&&(r=p(r,t.caret,e),s=!0),"u"===o&&("A"<=e&&e<="Z"||"a"<=e&&e<="z")&&(r=p(r,t.caret,e.toUpperCase()),s=!0),"l"==o&&("A"<=e&&e<="Z"||"a"<=e&&e<="z")&&(r=p(r,t.caret,e.toLowerCase()),s=!0),"a"===o&&("A"<=e&&e<="Z"||"a"<=e&&e<="z")&&(r=p(r,t.caret,e),s=!0),"w"===o&&("A"<=e&&e<="Z"||"a"<=e&&e<="z"||"0"<=e&&e<="9")&&(r=p(r,t.caret,e),s=!0),t.$input.val(r),i=r,n=t.caret,!0===s&&("_"!==r[n]&&n++,t.mask[n]===t.separator[n])&&n++,f(t,n))}if(t.mask.length<=0){if(i.length>t.maxlength)return t.$input.val(t.last),f(t,t.caret);if(1===e.length&&!1===t.filtre.test(e))return t.$input.val(t.last),f(t,t.caret)}t.$container.removeClass("--empty"),""===i&&t.$container.addClass("--empty")}(t,e),t.$input.trigger("change"),v(t)}function b(t,e){return e=0<t.suffixinline.length&&-1<(t=e.indexOf(t.suffixinline))?e.substr(0,t):e}function v(t){var e,i,n,a,s,r=t.$input.val();t.$container.removeClass("--empty"),""===r&&(r=t.placeholder,t.$container.addClass("--empty")),0<t.suffixinline.length?0<r.length&&r.indexOf(t.suffixinline)<0&&(n=h(t),r+=t.suffixinline,t.$input.val(r),f(t,n)):(0!==t.$value.length&&(t.$value.html(r),t.$nodown.html(r)),n=t.$input.get(0).offsetWidth,n-=s=parseInt(w.$().rootProperty("padding-left",t.$input.get(0)))+parseInt(w.$().rootProperty("padding-right",t.$input.get(0))),i=0,0!==t.$suffix.length&&(i=t.$suffix.get(0).offsetWidth),0<=t.fontdown&&(e=t.$nodown.get(0).offsetWidth,t.$container.removeClass("--down"),0<t.fontdown?r.length>t.fontdown&&t.$container.addClass("--down"):n/2<(e+i+s+8)/2&&t.$container.addClass("--down")),0!==t.$suffix.length&&(e=t.$value.get(0).offsetWidth,i=t.$suffix.get(0).offsetWidth,n=t.$input.get(0).offsetWidth,n-=s=(r=parseInt(t.$input.css("padding-left")))+(a=parseInt(t.$input.css("padding-right"))),s=e+r,"center"===t.$input.css("text-align")&&(s=n/2+e/2+r),"right"===t.$input.css("text-align")?""===t.$suffix.get(0).style.right&&(t.$suffix.get(0).style.right=a-i+"px"):t.$suffix.get(0).style.left=s+"px"))}function $(t,e){t.id;var i=w.$("*:focus");t.$container.removeClass("--focus-within"),!0===t.$container.get(0).contains(i.get(0))?t.$container.addClass("--focus-within"):!1===t.$container.get(0).contains(e.relatedTarget)&&(0<t.mask.length&&t.$input.val()===t.separator&&(t.$input.val(""),t.$input.trigger("change")),setTimeout(function(){t.$input.trigger("tbInputField",{id:t.id,type:t.type,action:"containerblur"}),t.$input.trigger("tbInputFieldBlur",{id:t.id,type:t.type})},50))}function y(t,e){var i,n,a,s,r;t.$input.isDisabled()||((n=w.$(e.target)).hasClass("--datepicker")&&((i=t).$input.trigger("tbInputField",{id:i.id,type:i.type,action:"datepicker"}),i.$input.trigger("tbOpenDatePicker",{id:i.id})),n.hasClass("--reset")&&C(t),n.hasClass("--password")&&(n=h(i=t),a="password"===(a=i.$input.getAttribute("type"))?"text":"password",i.$input.setAttribute("type",a),s=i.$container.find("[data-tb-inputfield-button]"),r=s.getAttribute("data-tb-show"),"text"===a&&(r=s.getAttribute("data-tb-hide")),s.find("[data-tb-inputfield-icon]").setAttribute("data-icon",r),(r=s.find("[data-tb-inputfield-aria]")).html(i.accesspassword),"text"===a&&r.html(i.accesspasswordhide),document.getElementById(i.id).focus(),f(i,n),i.$input.trigger("tbInputField",{id:i.id,type:i.type,action:"password"})),$(t,e))}function C(t){t.$input.val(""),t.lastkey="",t.last="",0<t.mask.length&&(t.$input.val(t.separator),f(t,0,0)),t.$input.trigger("change"),t.$input.trigger("tbInputField",{id:t.id,type:t.type,action:"reset"}),t.$container.removeClass("--empty"),t.$container.addClass("--empty"),document.getElementById(t.id).focus()}function x(t){var e=!1,i=t,n=("number"==typeof(t="string"==typeof(t=null==t?new Date:t)&&""===t?new Date:t)&&((n=new Date).setTime(t),t=n),"string"==typeof t&&(t.startsWith("-")||t.startsWith("+")||"0"===t)&&(n=t,(t=new Date).shift(n)),(t="string"==typeof t?t.date():t)instanceof Date&&isFinite(t)||(e=!0,t=new Date),t.setHours(0,0,0,0),{date:t,jj:parseInt(t.format("j")),mm:parseInt(t.format("n")),aaaa:parseInt(t.format("Y")),fr:t.fr(),en:t.en(),wanted:i});return!0===e&&(n.error=e),n}function A(t){var e,i,n=t.$input.val(),a=("montant"===t.type&&(n=b(t,n)),{id:t.id,type:t.type,action:"validate",value:n});return"date"===t.type&&(e=d.jsonDate(n),!0===n.isDate()&&(e.fr!==n||!0===e.error||0===e.aaaa?a.error="invalid":(a.en=e.en,0<t.min.length&&(i=d.jsonDate(t.min),e.date<i.date)&&(a.error="min",a.min=i.fr),0<t.max.length&&(i=d.jsonDate(t.max),e.date>i.date)&&(a.error="max",a.max=i.fr))),e.fr!==n&&(a.error="invalid"),a.today=!1,void 0===e.error)&&(a.today=e.fr===d.jsonDate(new Date).fr),"montant"===t.type&&(i=b(t,n),a.float=i.montant().number(),isNaN(a.float)&&(a.error="empty"),void 0===a.error)&&(i=d.jsonMontant(n),a.montant=i.wellformatted,a.fr=i.fr,a.en=i.en,a.float=i.float,a.amount=i.amount,0<t.min.length&&(e=d.jsonMontant(t.min),i.float<e.float)&&(a.error="min",a.min=t.min),0<t.max.length)&&(e=d.jsonMontant(t.max),i.float>e.float)&&(a.error="max",a.max=t.max),0<t.mask.length&&""===n&&(a.error="empty"),(0<t.mask.length||0<t.guide.length)&&void 0===a.error&&(n.length!==t.maxlength&&(a.error="invalid"),i=t.pattern.replace(/_/g,""),!1===new RegExp(i).test(n)&&(a.error="invalid"),(i=n.replace(/_/g,""))!==a.value)&&(a.error="invalid"),n.length<=t.maxlength&&void 0===a.error&&!1===t.$input.get(0).validity.valid&&(a.error="invalid"),t.$container.removeAttribute("data-tb-error"),t.$input.removeAttribute("data-tb-error"),void 0!==a.error&&(t.$container.setAttribute("data-tb-error",a.error),t.$input.setAttribute("data-tb-error",a.error)),t.$container.removeClass("--empty"),""===n&&t.$container.addClass("--empty"),a}function k(t,e,i,n){var a=t.getAttribute("data-tb-input-field-"+e);return a=void 0===(a=null===a&&null===(a=t.getAttribute("tb-input-field-"+e))&&null===(a=t.getAttribute(e))&&void 0!==i?l(i,n):a)?null:a}return d.$container,d.$input,d.$icon,d.$suffix,d.$value,d.$nodown,d.id,d.placeholder,d.value,d.suffixinline,d.min,d.max,d.maxlength,d.pattern,d.type,d.fontdown,d.last,d.lastkey,d.caret,d.error,d.accessreset,d.accesspassword,d.accesspasswordhide,d.accessdatepicker,d.filtre,d.mask,d.guide,d.separator,d.jsonMaxlength={_defaut:65,montant:14,password:8},d.jsonAccessText={reset:"Effacer la saisie",password:"Afficher le mot de passe",passwordhide:"Masquer le mot de passe",datepicker:"Afficher le calendrier",timepicker:"Afficher l'horloge"},d.jsonPlaceholder={_defaut:"",montant:"0",date:"jj/mm/aaaa",telephone:"0.. ou +33.. ou 0033..",mobile:"06...",email:"jean.dupond@laposte.net",moisannee:"mm/aaaa",time:"hh:mm"},d.jsonFiltre={_defaut:".",montant:"[0-9\\.,]",email:"[a-zA-Z0-9\\.\\-\\_@]",password:"[a-zA-Z0-9#$^+=!*()@%&]",telephone:"[ +0-9]",mobile:"[0-9]"},d.jsonMask={_defaut:"",date:"99/99/9999",moisannee:"99/9999",time:"99:99"},d.jsonPattern={_defaut:".*",time:"^(0[0-9]|1[0-9]|2[0-3]|[0-9]):[0-5][0-9]$",date:"^([0-2][0-9]|(3)[0-1])(\\/)(((0)[0-9])|((1)[0-2]))(\\/)\\d{4}$",moisannee:"^(((0)[0-9])|((1)[0-2]))(\\/)\\d{4}$",email:"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,}$",password:"^(?=.*[a-z])(?=.*[A-Z])(?=.*d)(?=.*[#$^+=!*()@%&]).{8,10}$",telephone:"^(?:(?:\\+|00)33|0)[ ]{0,1}[1-9](?:[ ]{0,1}\\d{2}){4}$",mobile:"^(0)(6|7)[0-9]{8}$"},d.jsonMontant=function(t){if(""===(t="number"==typeof(t=void 0===t?"":t)?t.toLocaleString("fr",{minimumFractionDigits:2,maximumFractionDigits:2}):t))return{float:NaN,error:"empty",montant:t};var e=t,i="",n=t.indexOf(",");if(0<=n&&(e=t.substring(0,n),i=t.substring(n)),3<(e="0"===(e=e.replace(/\D/g,""))[0]&&0===(e=e.replace(/^0+/,"")).length?"0":e).length){for(var a="",s=0,r=e.length-1;0<=r;)4===++s&&(a="."+a,s=1),a=e[r]+a,r--;e=a}i=i.replace(/\D/g,"");var o="";return 0===(t=e).length&&(o="0"),2<i.length&&(i=i.substring(0,2)),0<=n&&(t+=","+i),o+=t=","===t[0]?"0"+t:t,0<=n?(0===i.length&&(o+="00"),1===i.length&&(o+="0")):o+=",00",{float:parseFloat(o.replace(/\./g,"").replace(/,/g,".")),montant:t,amount:t.replace(/\./g,""),wellformatted:o,fr:o.replace(/\./g," "),en:o.replace(/,/g,"-").replace(/\./g,",").replace(/-/g,".")}},d.jsonDate=x,d.set=function(t,e,i){void 0===i&&(i=!0);var n,a,s=w.$(t),t=s.getAttribute("data-tb-input-field-type");"montant"!==t||"number"!=typeof e&&"string"!=typeof e||(n=(a=e.montant()).number(),"montant"===t&&(e=a,0===n)&&(e="0"),isNaN(n)&&(e="")),"date"===t&&("string"==typeof(a=e)&&e.isDate()&&(a=new Date(e).fr()),e=a="object"==typeof e&&e instanceof Date?e.fr():a),s.val(e),setTimeout(function(){s.trigger("updatesuffix")},50),!0===i&&s.trigger("change")},d.get=function(t){var t=w.$(t),e=t.val(),t=t.getAttribute("data-tb-input-field-type");return"montant"===t?""===(e=e.replace(/[^\d,.]/g,""))?null:e.montant().number():"date"===t?""===e?null:e.date():e},d.today=function(t){d.set(t,d.jsonDate(new Date).fr)},d.init=function(t){var s=this,e=(t="object"!=typeof t?{}:t).element,i=t.target,n=(void 0===e&&(e=document.getElementById(i)),this.id=e.getAttribute("id"),this.id,this.type=t.type,void 0===this.type&&(this.type=k(e,"type")),null===this.type&&(this.type="text"),this.type=this.type.toLowerCase(),"amount"===this.type&&(this.type="montant"),"moment"===this.type&&(this.type="date"),this.fontdown=k(e,"fontdown"),null===this.fontdown&&(this.fontdown=-1),this.min=e.getAttribute("min"),null===this.min&&(this.min=""),this.max=e.getAttribute("max"),null===this.max&&(this.max=""),this.accessreset=k(e,"accessreset",this.jsonAccessText,"reset"),this.accesspassword=k(e,"accesspassword",this.jsonAccessText,"password"),this.accesspasswordhide=k(e,"accesspasswordhide",this.jsonAccessText,"passwordhide"),this.accessdatepicker=k(e,"accessdatepicker",this.jsonAccessText,"datepicker"),this.maxlength=k(e,"maxlength",this.jsonMaxlength,this.type),this.placeholder=k(e,"placeholder",this.jsonPlaceholder,this.type),this.filtre=k(e,"filtre",this.jsonFiltre,this.type),""!==this.filtre&&(e.setAttribute("filtre",this.filtre),this.filtre=new RegExp(this.filtre)),this.mask=k(e,"masque"),null===this.mask&&(this.mask=""),""!==this.mask&&(this.mask=l(this.jsonMask,this.mask,this.mask),this.maxlength=this.mask.length),""===this.mask&&"date"===this.type&&(this.mask=l(this.jsonMask,this.type)),""!==this.mask&&(this.maxlength=this.mask.length),this.guide=k(e,"guide"),null===this.guide&&(this.guide=""),""!==this.guide&&(this.mask="",this.guide=l(this.jsonMask,this.guide,this.guide)),""===this.guide&&"date"!==this.type&&(this.guide=l(this.jsonMask,this.type)),""!==this.guide&&(this.mask="",this.maxlength=this.guide.length),this.separator=""),a=this.mask;if(0<(a=0<this.guide.length?this.guide:a).length){this.separator="";for(var r=0;r<a.length;r++){var o=a[r];"0"<=o&&o<="9"||"a"===o||"u"===o||"l"===o||"w"===o||"*"===o?(this.separator+="_","0"<=o&&o<="9"&&(n+="[0-9]"),"a"===o&&(n+="[a-zA-Z]"),"l"===o&&(n+="[a-z]"),"u"===o&&(n+="[A-Z]"),"w"===o&&(n+="[0-9a-zA-Z]"),"*"===o&&(n+="*")):(this.separator+=o,n+=o)}""!==n&&(n="^"+n+"$")}this.pattern=k(e,"pattern",this.jsonPattern,this.type),null!==this.pattern&&""!==this.pattern||""!==n&&0<a.length&&(this.pattern=n),""!==this.pattern&&e.setAttribute("pattern",this.pattern),this.$input=w.$(e),this.$container=this.$input.parent(),this.$container.addClass("--form-error"),e.setAttribute("data-tb-input-field-type",this.type),(i=s).$container.hasClass("--injected")||(null===(t=i.$input.getAttribute("inputmode"))&&("date"===i.type&&(t="decimal"),"telephone"!==i.type&&"mobile"!==i.type||(t="decimal"),"time"===i.type&&(t="decimal"),null!==(t="montant"===i.type?"decimal":t))&&i.$input.setAttribute("inputmode",t),i.$input.setAttribute("placeholder",i.placeholder),i.$input.addClass("--noborder --transparent"),i.$input.addClass("flex-item-fluid"),i.$input.addClass("flex-item-center"),u(i,"--reset","tb-reset",i.accessreset),u(i,"--password","tb-password",i.accesspassword),null!==(t=u(i,"--datepicker","tb-calendar",i.accessdatepicker))&&w.$(t).setAttribute("aria-expanded","false"),c(i,"--value"),0<=i.fontdown&&c(i,"--nodown"),i.$container.setAttribute("data-tb-type",i.type),i.$container.addClass("--injected")),this.$input.setListener("keydown",function(t){g(s,t)}),this.$input.setListener("input",function(t){m(s,t)}),this.$input.setListener("change",function(t){var e,i,n;!0!==(e=s).error&&(i=e.$input.val(),e.last!==i)&&((n=A(e)).action="keyup",e.$input.trigger("tbInputField",n),e.last=i)}),this.$input.setListener("focus",function(t){var e;t=t,0<(e=s).mask.length&&""===e.$input.val()&&(e.$input.val(e.separator),setTimeout(function(){f(e,0,0)},50)),e.$input.trigger("tbInputField",{id:e.id,type:e.type,action:"onfocus"}),$(e,t)}),this.$input.setListener("blur",function(a){setTimeout(function(){var t,e,i,n;e=a,0<(t=s).suffixinline.length&&(i=t.$input.val(),i=b(t,i),t.$input.val(i),t.$input.trigger("change"),v(t)),t.$input.hasAttribute("data-tb-input-field-centimes")&&((n=(i=t.$input.val()).indexOf(","))<0||n===i.length-1)&&(n=A(t),t.$input.val(n.montant),t.$input.trigger("change"),v(t)),$(t,e),t.$input.trigger("tbInputField",{id:t.id,type:t.type,action:"onblur"})},0)}),this.$icon=this.$container.find("[data-tb-inputfield-button]"),this.$icon.setListener("click",function(t){y(s,t)}),this.$icon.setListener("keydown",function(t){13!==t.keyCode&&13!==t.which&&32!==t.keyCode&&32!==t.which||(y(s,t),t.stopPropagation(),t.preventDefault())}),this.$icon.setListener("blur",function(t){$(s,t)}),this.$value=this.$container.find("span[class*='--value']"),0!==this.$value.length&&this.$value.setAttribute("id",s.id+"-value"),this.$nodown=this.$container.find("span[class*='--nodown']"),0!==this.$nodown.length&&this.$nodown.setAttribute("id",s.id+"-nodown"),this.$suffix=this.$container.find("span[class*='--suffix']"),this.suffixinline=this.$suffix.html(),0!==this.$suffix.length&&!1===this.$suffix.hasClass("--inline-suffix")&&(this.$suffix.html("&nbsp;"+this.suffixinline),this.suffixinline="",this.$suffix.addClass("flex-container--row flex-align-center --form-error"),this.$suffix.setAttribute("id",s.id+"-suffix"),window.addEventListener("resize",function(){v(s)})),this.observer=new MutationObserver(function(t){t.forEach(function(t,e){t.target===s.$input.get(0)&&("attributes"==t.type&&"readonly"===t.attributeName&&(s.$container.removeClass("--readonly"),!0===t.target.readOnly)&&s.$container.addClass("--readonly"),"attributes"==t.type&&"disabled"===t.attributeName&&(s.$container.enable(!t.target.disabled),s.$icon.enable(!t.target.disabled),s.$container.removeClass("--disabled"),!0===t.target.disabled)&&s.$container.addClass("--disabled"),"attributes"==t.type&&"pattern"===t.attributeName&&(s.pattern=t.target.pattern,C(s)),"attributes"!=t.type||"filtre"!==t.attributeName&&"data-tb-input-field-filtre"!==t.attributeName||(s.filtre=w.$(t.target).getAttribute(t.attributeName),s.filtre=new RegExp(s.filtre),C(s)))})}),this.observer.observe(e,{attributes:!0,subtree:!1}),this.value=this.$input.val(),"date"!==this.type||""===this.value||this.value.isDate()||(this.value=x(new Date).fr,this.$input.val(this.value)),this.last="",this.$input.addClass("--ready"),setTimeout(function(){var t=A(s);t.action="ready",null!==s.$input.getAttribute("formControlName")&&(t.formControlName=s.$input.getAttribute("formControlName")),s.$input.trigger("tbInputField",t),setTimeout(function(){v(s)},50)},25)},d}}),function(t,e){"use strict";"object"==typeof exports?module.exports=e:t.tbInputFieldCodeService=e(t.JQ)}(this,function(p){return function(){"use strict";var i={};function n(t){if(!t.$container.hasClass("--injected")){null===t.$input.getAttribute("inputmode")&&t.$input.setAttribute("inputmode","numeric"),i="--reset",s="tb-reset",n=(e=t).accessreset,e.$container.hasClass(i)&&((a=document.createElement("button")).className="flex-container flex-align-center flex-center "+i,a.setAttribute("data-lien-user","actif"),a.setAttribute("type","button"),a.innerHTML='<span data-icon="'+s+'" class="'+i+'" aria-hidden="true"></span>',a.innerHTML+='<span class="visually-hidden access-text">'+n+"</span>",e.$container.get(0).appendChild(a));for(var e,i,n,a,s=p.$("<div>"),r=(s.setAttribute("data-tb-underline",""),s.setAttribute("aria-hidden","true"),""),o=0;o<t.maxlength;o++)r+="<div></div>";s.html(r),t.$input.parent().append(s),t.$container.addClass("--underline"),!0===t.$container.hasClass("--otp")&&(t.$input.css("width",2*t.maxlength+"ch"),t.$input.css("margin-left","1ch")),t.$container.setAttribute("data-tb-type",t.type),t.$container.addClass("--injected")}}function a(t,e){var i,n,a,s;"text"===t.$input.getAttribute("type")&&(i=e.key,void 0!==e.key&&"Unidentified"!==e.key||(s=a="",8===(s=void 0!==(n=e)?n.which||n.keyCode:s)&&(a="Backspace"),46===s&&(a="Delete"),48<=s&&s<=57&&(!1===n.getModifierState("CapsLock")&&!0===n.shiftKey&&(a=String.fromCharCode(s)),!0===n.getModifierState("CapsLock"))&&!1===n.shiftKey&&(a=String.fromCharCode(s)),96<=s&&s<=105&&(a=String.fromCharCode(s-48)),65<=s&&s<=90&&(a=String.fromCharCode(s+32)),65<=s&&s<=90&&!0===n.shiftKey&&(a=String.fromCharCode(s)),110!==s&&190!==s||(a="."),i=a=168!==s&&188!==s?a:","),t.last=t.$input.val(),t.lastkey=i,!0===e.repeat&&1===i.length||!0===e.shiftKey&&1!==i.length&&"Tab"!==i&&""!==i||!0===e.ctrlKey&&"v"!==i&&"V"!==i&&"c"!==i&&"C"!==i&&"a"!==i&&"A"!==i?(e.stopPropagation(),e.preventDefault()):c(t))}function r(t,e){e.length>t.maxlength&&(e=e.substring(0,t.maxlength)),!0===new RegExp("^[0-9]+$").test(e)&&i.set(t.$input.get(0),e)}function o(t){var e,i,n=t.$input.val();t.last!==n&&((e=function(t){var e=t.$input.val(),i={id:t.id,type:t.type,action:"validate",value:e};!1===function(t,e){return"string"==typeof t&&new RegExp(e).test(t)}(e,t.pattern)&&(i.error="invalid");t.$input.removeAttribute("data-tb-error"),void 0!==i.error&&t.$input.setAttribute("data-tb-error",i.error);return i}(t)).action="keyup",t.$input.trigger("tbInputField",e),t.last=n,void 0===e.error)&&""!==t.endfocus&&null!==(i=document.getElementById(t.endfocus))&&setTimeout(function(){i.focus()},0)}function d(t){t.$container.removeClass("--empty"),""===t.$input.val()&&(t.$container.addClass("--empty"),t.$container.setAttribute("data-tb-length",0))}function l(t,e){var i=p.$("*:focus");t.$container.removeClass("--focus-within"),!0===t.$container.get(0).contains(i.get(0))?t.$container.addClass("--focus-within"):!1===t.$container.get(0).contains(e.relatedTarget)&&setTimeout(function(){t.$input.trigger("tbInputField",{id:t.id,type:t.type,action:"containerblur"}),t.$input.trigger("tbInputFieldBlur",{id:t.id,type:t.type})},50)}function u(t){var e;(e=t).lastkey="",e.last="",e.$input.val(""),d(e),e.$input.removeAttribute("readonly"),e.$container.removeClass("--readonly"),e.$input.trigger("change"),e.$input.trigger("tbInputField",{id:e.id,type:e.type,action:"reset"}),e.$container.setAttribute("data-tb-length",0),document.getElementById(t.id).focus()}function s(t){var e=p.$(t),i=e.parent(),t=t.value.length,t=(i.setAttribute("data-tb-length",t),parseInt(e.getAttribute("maxlength"))),e=e.get(0).selectionStart,t=(t<=e&&e--,i.find("[data-tb-underline] div"));t.removeClass("--caret"),t.eq(e).addClass("--caret")}function c(t){s(t.$input.get(0))}return i.$container,i.$input,i.$icon,i.id,i.last,i.lastkey,i.accessreset,i.maxlength,i.type="code",i.pattern="^[0-9]*$",i.endfocus="",i.setReadOnly=function(t){t=p.$(t);t.setAttribute("readonly",""),t.parent().addClass("--readonly")},i.setDisabled=function(t){var t=p.$(t),e=t.parent(),i=e.find("button");e.addClass("--readonly"),t.setAttribute("readonly",""),i.setAttribute("hidden","")},i.get=function(t){return p.$(t).val()},i.set=function(t,e){t.value=e,p.$(t).trigger("change"),p.$(t.closest(".tb-container-inputfield")).removeClass("--empty"),""===e&&p.$(t.closest(".tb-container-inputfield")).addClass("--empty"),s(t)},i.init=function(t){var s=this,e=void 0===(t="object"!=typeof t?{}:t).element?null:t.element,t=void 0===t.target?null:t.target;null===e&&null===t?console.log("tbInputField"+this.type+" mal initialisé"):(null===e&&(e=document.getElementById(t)),this.id=e.getAttribute("id"),null===this.id?console.log("tbInputField"+this.type+" : manque l'attribut 'id'"):(this.endfocus=e.getAttribute("data-tb-input-field-endfocus"),null===this.endfocus&&(this.endfocus=""),this.accessreset=e.getAttribute("data-tb-input-field-accessreset"),null===this.accessreset&&(this.accessreset="Effacer la saisie de l'identifiant"),this.maxlength=e.getAttribute("maxlength"),null===this.maxlength&&(this.maxlength=10),this.pattern="^[0-9]{"+this.maxlength+"}$",this.$input=p.$(e),this.$container=this.$input.parent(),n(s),this.$input.setListener("paste",function(t){var e;e=s,(t=t).stopPropagation(),t.preventDefault(),r(e,(t.originalEvent||t).clipboardData.getData("text/plain"))}),this.$input.setListener("keydown",function(t){a(s,t)}),this.$input.setListener("input",function(t){var e,i,n,a;t=t,"text"===(e=s).$input.getAttribute("type")&&(""===e.lastkey&&void 0!==t.data&&null!==t.data&&void 0!==t.data&&null!==t.data&&1===t.data.length&&(e.lastkey=t.data),1===(i=e.lastkey||"").length&&(i<"0"||"9"<i)&&e.$input.val(e.last),n=new RegExp("^[0-9]+$"),a=e.$input.val(),!1===n.test(a)&&(a=a.replace(/[^0-9]/gm,""),e.$input.val(a)),1<=i.length&&void 0!==t.data&&null!==t.data&&1<t.data.length&&r(e,t.data),e.$input.trigger("change"),d(e),c(e))}),this.$input.setListener("change",function(t){o(s)}),this.$input.setListener("focus",function(t){var e;t=t,(e=s).$input.trigger("tbInputField",{id:e.id,type:e.type,action:"onfocus",focus:t.target.nodeName.toLowerCase()}),l(e,t),d(e)}),this.$input.setListener("blur",function(i){setTimeout(function(){var t,e;l(t=s,e=i),t.$input.trigger("tbInputField",{id:t.id,type:t.type,action:"onblur",blur:e.target.nodeName.toLowerCase()})},10)}),this.$input.setListener("keyup",function(t){c(s)}),this.$input.setListener("click",function(t){c(s)}),this.$icon=this.$container.find("button"),this.$icon.setListener("click",function(t){u(s)}),this.$icon.setListener("keydown",function(t){13!==t.keyCode&&13!==t.which&&32!==t.keyCode&&32!==t.which||(u(s),t.stopPropagation(),t.preventDefault())}),this.$icon.setListener("blur",function(t){l(s,t)}),this.last="",d(s),this.$input.addClass("--ready"),setTimeout(function(){var t={};t.id=s.id,t.type=s.type,t.action="ready",null!==s.$input.getAttribute("formControlName")&&(t.formControlName=s.$input.getAttribute("formControlName")),s.$input.trigger("tbInputField",t)},25)))},i}}),function(t,e){"use strict";"object"==typeof exports?module.exports=e:t.tbInputFieldDateService=e(t.JQ)}(this,function(g){return function(){"use strict";var i={};function n(t){var e,i,n,a,s;t.$container.hasClass("--injected")||(null===t.$input.getAttribute("inputmode")&&t.$input.setAttribute("inputmode","numeric"),t.$input.setAttribute("guide",t.guide),t.$input.setAttribute("maxlength",t.guide.length),i="--reset",n="tb-reset",a=(e=t).accessreset,e.$container.hasClass(i)&&((s=document.createElement("button")).className="flex-container flex-align-center flex-center "+i,s.setAttribute("data-lien-user","actif"),s.setAttribute("type","button"),"--datepicker"===i&&(s.setAttribute("tabindex","-1"),s.setAttribute("aria-hidden","true")),s.innerHTML='<span data-icon="'+n+'" class="'+i+'" aria-hidden="true"></span>',s.innerHTML+='<span class="visually-hidden access-text">'+a+"</span>",e.$container.get(0).appendChild(s)),t.$container.hasClass("--datepicker"),t.$container.setAttribute("data-tb-type",t.type),t.$container.addClass("--injected"))}function o(t,e,i,n){"text"===t.$input.getAttribute("type")&&(void 0===i&&(i=e),!0===n?setTimeout(function(){t.$input.get(0).selectionStart=e,t.$input.get(0).selectionEnd=i},0):(t.$input.get(0).selectionStart=e,t.$input.get(0).selectionEnd=i))}function a(t,e){var i,n,a,s;"text"===t.$input.getAttribute("type")&&(i=e.key,void 0!==e.key&&"Unidentified"!==e.key||(s=a="",8===(s=void 0!==(n=e)?n.which||n.keyCode:s)&&(a="Backspace"),46===s&&(a="Delete"),48<=s&&s<=57&&(!1===n.getModifierState("CapsLock")&&!0===n.shiftKey&&(a=String.fromCharCode(s)),!0===n.getModifierState("CapsLock"))&&!1===n.shiftKey&&(a=String.fromCharCode(s)),96<=s&&s<=105&&(a=String.fromCharCode(s-48)),65<=s&&s<=90&&(a=String.fromCharCode(s+32)),65<=s&&s<=90&&!0===n.shiftKey&&(a=String.fromCharCode(s)),110!==s&&190!==s||(a="."),i=a=168!==s&&188!==s?a:","),t.last=t.$input.val(),t.lastkey=i,!0===e.repeat&&1===i.length||!0===e.shiftKey&&1!==i.length&&"Tab"!==i&&""!==i||!0===e.ctrlKey&&"v"!==i&&"V"!==i&&"c"!==i&&"C"!==i&&"a"!==i&&"A"!==i||i.length<=0||!0!==e.ctrlKey&&1===i.length&&t.last.length>=t.guide.length&&t.$input.get(0).selectionStart===t.$input.get(0).selectionEnd)&&(e.stopPropagation(),e.preventDefault())}function d(t){t.$container.removeClass("--empty"),""===t.$input.val()&&t.$container.addClass("--empty")}function s(t,e){var i=g.$("*:focus");t.$container.removeClass("--focus-within"),!0===t.$container.get(0).contains(i.get(0))?t.$container.addClass("--focus-within"):!1===t.$container.get(0).contains(e.relatedTarget)&&setTimeout(function(){t.$input.trigger("tbInputField",{id:t.id,type:t.type,action:"containerblur"}),t.$input.trigger("tbInputFieldBlur",{id:t.id,type:t.type})},50)}function l(t){t.lastkey="",t.last="",t.$input.val(""),d(t),t.$input.trigger("change"),t.$input.trigger("tbInputField",{id:t.id,type:t.type,action:"reset"})}function u(t,e){var i="",n=0;e=e.replaceAll(t.separator,"");for(var a=0;a<e.length;a++)t.guide[n]===t.separator&&(i+=t.separator,n++),i+=e[a],n++;return e=i}function c(t,e,i){return"string"==typeof t&&t.length===e.length&&new RegExp(i).test(t)}function p(t){var e,i=t.$input.val(),n=("date"===t.$input.getAttribute("type")&&(i=i.date().fr()),{id:t.id,type:t.type,action:"validate",value:i});return c(i,t.guide,t.pattern)?(e=i.split(t.separator).map(Number),n.day=e[0],n.month=e[1],n.year=e[2],0<t.min.length&&-1===r(t,i,t.min)&&(n.error="min"),0<t.max.length&&1===r(t,i,t.max)&&(n.error="max"),i!==i.date().toLocaleDateString()&&(n.error="nonexistent")):n.error="invalid",t.$input.removeAttribute("data-tb-error"),void 0!==n.error&&t.$input.setAttribute("data-tb-error",n.error),n}function r(t,e,i){e=e.split(t.separator).map(Number),i=i.split(t.separator).map(Number),t=0;return e[2]<i[2]&&(t=-1),e[2]===i[2]&&e[1]<i[1]&&(t=-1),e[2]===i[2]&&e[1]===i[1]&&e[0]<i[0]&&(t=-1),e[2]>i[2]&&(t=1),e[2]===i[2]&&e[1]>i[1]&&(t=1),t=e[2]===i[2]&&e[1]===i[1]&&e[0]>i[0]?1:t}function h(t){return t=0<(t=null===t?"":t).length&&("0"===t||"+"===t[0]||"-"===t[0])?(new Date).shift(t).fr():t}function f(t,e){t.$input.isDisabled()||((e=g.$(e.target)).hasClass("--datepicker")&&(t.$input.trigger("tbInputField",{id:t.id,type:t.type,action:"datepicker"}),t.$input.trigger("tbOpenDatePicker",{id:t.id})),e.hasClass("--reset")&&(l(e=t),document.getElementById(e.id).focus()))}return i.type="date",i.guide="99/99/9999",i.separator="/",i.pattern="^([0-2][0-9]|(3)[0-1])\\/(0[1-9]|1[0-2])\\/(19\\d\\d|20\\d\\d|21\\d\\d)$",i.natif=!1,i.get=function(t){t=g.$(t).val();return""===t?null:t.date()},i.set=function(t,e,i){var t=g.$(t),n="99/99/9999",a=e;void 0===i&&(i=!0),""===(e=h(e="string"==typeof(e="object"==typeof e&&e instanceof Date&&!isNaN(e)?e.fr():e)&&e.length>n.length?e.substring(0,n.length):e))&&t.parent().addClass("--empty"),t.val(e),!0!==i&&a===e||t.trigger("change")},i.init=function(t){var r=this,e=void 0===(t="object"!=typeof t?{}:t).element?null:t.element,t=void 0===t.target?null:t.target;null===e&&null===t?console.log("tbInputField"+this.type+" mal initialisé"):(null===e&&(e=document.getElementById(t)),this.id=e.getAttribute("id"),null===this.id?console.log("tbInputField"+this.type+" : manque l'attribut 'id'"):(this.min=e.getAttribute("min"),null===this.min?this.min="":(this.min=h(this.min),c(this.min,this.guide,this.pattern)?e.setAttribute("min",this.min):(e.removeAttribute("min"),this.min="")),this.max=e.getAttribute("max"),null===this.max?this.max="":(this.max=h(this.max),c(this.max,this.guide,this.pattern)?e.setAttribute("max",this.max):(e.removeAttribute("max"),this.max="")),this.accessreset=e.getAttribute("data-tb-input-field-accessreset"),null===this.accessreset&&(this.accessreset="Effacer la saisie"),this.accessdatepicker=e.getAttribute("data-tb-input-field-accessdatepicker"),null===this.accessdatepicker&&(this.accessdatepicker="Afficher le calendrier"),this.$input=g.$(e),this.$container=this.$input.parent(),n(r),this.$input.setListener("keydown",function(t){a(r,t)}),this.$input.setListener("input",function(t){var e,i,n,a,s;t=t,"text"===(e=r).$input.getAttribute("type")&&(i=e.$input.val(),n="text"!==(n=e).$input.getAttribute("type")?0:n.$input.get(0).selectionStart,""===e.lastkey&&void 0!==t.data&&null!==t.data&&1===t.data.length&&(e.lastkey=t.data),t=i,s=!1,1===(a=e.lastkey||"").length&&("0"<=a&&a<="9"&&(s=!0,t=u(e,i)),t.length<e.guide.length)&&e.guide[t.length]===e.separator&&(t+=e.separator,n++),"Backspace"===a&&(s=!0,t=u(e,i)),"Delete"===a&&(s=!0,t=u(e,i)),!1===s&&(t=e.last),e.$input.val(t),1<t.length-e.last.length&&n++,o(e,n),t.length>e.maxlength?(e.$input.val(e.last),o(e,e.caret)):(d(e),e.$input.trigger("change")))}),this.$input.setListener("change",function(t){var e,i,n;n=(e=r).$input.val(),e.last!==n&&((i=p(e)).action="keyup",e.$input.trigger("tbInputField",i),e.last=n)}),this.$input.setListener("focus",function(t){var e;t=t,(e=r).$input.trigger("tbInputField",{id:e.id,type:e.type,action:"onfocus",focus:t.target.nodeName.toLowerCase()}),s(e,t),d(e)}),this.$input.setListener("blur",function(i){setTimeout(function(){var t,e;s(t=r,e=i),t.$input.trigger("tbInputField",{id:t.id,type:t.type,action:"onblur",blur:e.target.nodeName.toLowerCase()})},10)}),this.$input.setListener("paste",function(t){var e;e=r,(t=t).stopPropagation(),t.preventDefault(),c(t=(t.originalEvent||t).clipboardData.getData("text/plain"),e.guide,e.pattern)&&i.set(e.$input.get(0),t)}),this.$input.setListener("copy",function(t){var e;e=r,(t=t).stopPropagation(),t.preventDefault(),c(t=e.$input.val(),e.guide,e.pattern)&&navigator.clipboard.writeText(t)}),this.$icon=this.$container.find("button"),this.$icon.setListener("click",function(t){f(r,t)}),this.$icon.setListener("keydown",function(t){13!==t.keyCode&&13!==t.which&&32!==t.keyCode&&32!==t.which||(f(r,t),t.stopPropagation(),t.preventDefault())}),this.$icon.setListener("blur",function(t){s(r,t)}),this.observer=new MutationObserver(function(t){t.forEach(function(t,e){t.target===r.$input.get(0)&&("attributes"==t.type&&"readonly"===t.attributeName&&(r.$container.removeClass("--readonly"),!0===t.target.readOnly)&&r.$container.addClass("--readonly"),"attributes"==t.type)&&"disabled"===t.attributeName&&(r.$container.removeClass("--disabled"),!0===t.target.disabled)&&r.$container.addClass("--disabled")})}),this.observer.observe(e,{attributes:!0,subtree:!1}),this.$inputnatif=g.$("#"+this.id+"-natif"),0<this.$inputnatif.length&&(""!==this.min&&this.$inputnatif.setAttribute("min",this.min.date().en()),""!==this.max&&this.$inputnatif.setAttribute("max",this.max.date().en()),this.$inputnatif.setListener("change",function(t){var e=r.$inputnatif.val().date().fr();c(e,r.guide,r.pattern)&&r.$input.val(e),r.$input.trigger("change"),r.$input.get(0).focus()}),this.$inputnatif.setListener("click",function(t){r.$inputnatif.val(r.$input.val().date().en()),r.$inputnatif.trigger("change"),r.$inputnatif.addClass("--width"),r.$inputnatif.get(0).focus(),setTimeout(function(){r.$inputnatif.removeClass("--width")},300)})),t=h(t=(t=this.$input.val()).isDate()?t.date().fr():t),this.$input.val(t),t.isDate()||l(r),this.last="",d(r),this.$input.addClass("--ready"),setTimeout(function(){var t=p(r);t.action="ready",null!==r.$input.getAttribute("formControlName")&&(t.formControlName=r.$input.getAttribute("formControlName")),r.$input.trigger("tbInputField",t)},25)))},i}}),function(t,e){"use strict";"object"==typeof exports?module.exports=e:t.tbLoader2Service=e(t.JQ)}(this,function(o){var i={$icons:null,$skeleton:null,$text:null,$target:null,target:null};function n(t){t.stop=!1,t.icon=-1,void 0!==t.icons&&null!==t.icons&&function t(e){!0!==e.stop&&(e.icon++,e.icon===e.icons.length&&(e.icon=0),e.$target.find("[data-icon]").addClass("is-hidden").removeClass(e.animation).eq(e.icon).removeClass("is-hidden"),setTimeout(function(){e.$target.find("[data-icon]").eq(e.icon).addClass(e.animation),e.$target.find("[data-icon]").eq(e.icon).one("transitionend webkitTransitionEnd animationend webkitAnimationEnd",function(){t(e)})},200))}(t)}function a(t){var e=o.$(t.eltLoading);e.addClass("relative"),t.$target.removeAttribute("style"),t.$target.css("left",e.get(0).offsetLeft+"px"),t.$target.css("top",e.get(0).offsetTop+"px"),t.$target.css("width",e.get(0).offsetWidth+"px"),t.$target.css("height",e.get(0).offsetHeight+"px")}return i.tbLoader=function(t){var e="";return e+='<div class="tb-loader-container" tabindex="-1">',t.$target.hasClass("--skeleton")?e+='       <div class="tb-loader-skeleton" aria-hidden="true"></div>':e+='       <div class="tb-loader-icons" aria-hidden="true"></div>',e=(e=(e=e+'       <div class="tb-loader-text">'+('         <p id="message1-'+t.id+'">'+t.message1+"</p>"))+('         <p id="message2-'+t.id+'">'+t.message2+"</p>"))+"       </div>"+"</div>"},i.tbLoaderIcons=function(t){t.$icons.empty();for(var e="",i=0;i<t.icons.length;i++)e+='         <div data-icon="'+t.icons[i]+'" aria-hidden="true" class="flex-item-center is-hidden"></div>';return e},i.tbLoaderSpinner=function(t){t.$icons.empty();t=t.$target.getAttribute("data-tb-spinner"),t='<div data-spinner="'+(t=null===t?"square":t)+'">';return t+"         <div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>"+"</div>"},i.tbLoaderSkeleton=function(t){t.$skeleton.empty();var e="";if(t.$target.hasClass("--skeleton")){var i=".tb-skeleton-template",n=t.$target.getAttribute("data-tb-skeleton"),n=(null!==n&&(i+="#"+n),o.$(i));if(0<n.length){var a=n.html();null===(s=t.$target.getAttribute("data-tb-repeat"))&&(s="1");for(var s=parseInt(s),r=0;r<s;r++)e+=a;return e}}},i.configure=function(t,e){t.target=(e="object"!=typeof e?{}:e).target,void 0===t.target?(0!==o.$("#tbi-loader").length&&(t.target="[id='tbi-loader']"),void 0===t.target&&(t.target="[id^='tbi-loader']")):t.target="[id='"+t.target+"']",t.$target=o.$(t.target),t.id=t.$target.getAttribute("id"),t.target=t.id,t.timeout=e.timeout||null,t.delay=e.delay||0,t.cssVariant=e.css||null,t.message1=e.message1||"Un petit instant…",t.message2=e.message2||"Chargement en cours",t.eltLoading=e.element||".tb-wrapper-main",o.$(t.eltLoading).length<=0&&(t.eltLoading="body"),t.DomActiveElement=e.activeElement||null,t.focusEndLoading=e.focusEndLoading||null,t.voice=e.voice||null,t.animation=e.animation||null,null===t.animation&&(t.animation=o.$().rootProperty("--loader2-animation")),t.$target.hasClass("--rotate")&&(t.animation="--rotate"),t.$target.hasClass("--scale")&&(t.animation="--scale"),t.masque=e.idMasque||t.eltLoading,null===t.masque&&t.$target.hasClass("--touch")&&(t.masque="none"),t.cssMasque=e.cssMasque||"",""===t.cssMasque&&t.$target.hasClass("--masque")&&(t.cssMasque="tb-loader-masque"),!1===t.$target.hasClass("--skeleton")&&(t.icons=e.icons||null,null===t.icons&&(t.icons=t.$target.getAttribute("data-tb-icons")),null===t.icons&&(t.icons=o.$().rootProperty("--loader2-icons")),null===t.icons&&(t.icons="tb-reset"),t.icons=t.icons.split(" "))},i.show=function(t){i.configure(this,t),i._show(this)},i._show=function(e){var t;if(0!==e.$target.length)return null===e.DomActiveElement?e.DomActiveElement=document.activeElement:"string"==typeof e.DomActiveElement&&(t=o.$("#"+e.DomActiveElement),e.DomActiveElement="object"==typeof t?t:document.activeElement),e.DomActiveElement.setAttribute("tb-element-to-focus-end-loading",""),!0==!e.$target.isEmpty()&&0<e.$target.find(".tb-loader-spinner").length&&(e.$target.addClass("--vertical"),t=e.$target.find("p"),e.message1=t.eq(0).html(),e.message2=t.eq(1).html(),e.$target.empty()),e.$target.isEmpty()&&e.$target.html(i.tbLoader(e)),!1===e.$target.hasClass("--skeleton")&&(e.$icons=e.$target.find(".tb-loader-icons"),0<e.$icons.length)&&(e.$icons.html(i.tbLoaderIcons(e)),!0===e.$target.hasClass("--spinner"))&&e.$icons.html(i.tbLoaderSpinner(e)),!0===e.$target.hasClass("--skeleton")&&(e.$skeleton=e.$target.find(".tb-loader-skeleton"),0<e.$skeleton.length)&&e.$skeleton.html(i.tbLoaderSkeleton(e)),e.$target.removeClass("--loading"),e.$target.addClass("--loader2"),e.$target.addClass("--loading"),null!==e.cssVariant&&e.$target.addClass(e.cssVariant),t="",null!==e.masque&&"none"!==e.masque&&(t=o.$(e.masque),e.$target.setAttribute("data-tb-idMasque",e.masque)),null!==e.masque&&"none"!==e.masque||null===e.masque?t.addClass("relative").addClass("zone-inactif"):t.removeClass("relative").removeClass("zone-inactif"),void 0!==e.cssMasque&&null!==e.cssMasque&&""!==e.cssMasque&&(t.addClass(e.cssMasque),e.$target.setAttribute("data-tb-cssMasque",e.cssMasque)),e.$target.removeAttribute("data-tb-focusEndLoading"),null!==e.focusEndLoading&&(e.$target.setAttribute("data-tb-focusEndLoading",e.focusEndLoading),o.$(document).find("[tb-element-to-focus-end-loading]").removeAttribute("tb-element-to-focus-end-loading")),e.$text=e.$target.find(".tb-loader-text"),e.$text.removeClass("visually-hidden"),e.$text.removeClass("access-text"),!0===e.$target.hasClass("--tiny")&&e.$text.addClass("visually-hidden access-text"),window.addEventListener("resize",function(){a(e)}),setTimeout(function(){n(e),setTimeout(function(){a(e)},e.delay)},10),null!==e.timeout&&setTimeout(function(){i.hide({target:e.id})},e.timeout),setTimeout(function(){var t;"none"!==e.voice&&0!==(t=e.$target.find(".tb-loader-container")).length&&t.get(0).focus()},0),e.$target.trigger("tbLoader",{id:e.target,action:"start"}),i},i.hide=function(t){var e,t=void 0===(t=(t="object"!=typeof t?{}:t).target)?"[id^='tbi-loader']":"[id='"+t+"']",t=o.$(t+"[class*='--loading']");0!==t.length&&(t.each(function(t){var e=t.getAttribute("data-tb-idMasque"),i=t.getAttribute("data-tb-cssMasque"),e=e?o.$(e):o.$(".tb-wrapper-main"),n=(e.removeClass("relative").removeClass("zone-inactif"),i&&""!==i&&e.removeClass(i),t.getAttribute("data-tb-focusEndLoading"));null!==n&&setTimeout(function(){o.$(n).get(0).focus()},100),t.removeClass("--loading"),t.trigger("tbLoader",{id:t.getAttribute("id"),action:"stop"}),t.find(".tb-loader-text").removeAttribute("aria-hidden"),t.find(".tb-loader-text").removeClass("visually-hidden"),t.find(".tb-loader-text").removeClass("access-text"),t.removeAttribute("data-tb-idMasque"),t.removeAttribute("data-tb-cssMasque"),t.removeAttribute("data-tb-focusEndLoading")}),0<(e=o.$(document).find("[tb-element-to-focus-end-loading]")).length)&&(e[0].removeAttribute("tb-element-to-focus-end-loading"),setTimeout(function(){e[0].focus()},10))},i.isLoading=function(t){t=void 0===(t=(t="object"!=typeof t?{}:t).target)?"[id^='tbi-loader']":"[id='"+t+"']";return 0!==o.$(t+"[class*='--loading']").length},i.getRunning=function(){return 0===o.$("[id^='tbi-loader'][class*='--loading']").length?null:o.$("[id^='tbi-loader'][class*='--loading']").get(0)},i}),function(t,e){"use strict";"object"==typeof exports?module.exports=e:t.tbStepperService=e(t.JQ)}(this,function(c){return function(){"use strict";var t={};function u(t){var e=c.$().media();"tiny"===e&&("--tiny"===t.media||"--small"===t.media)||"small"===e&&"--small"===t.media||"--force"===t.media?(0==t.$stepper.hasClass("--notext")&&(t.$stepper.setAttribute("aria-hidden",!0),t.$stepmin.removeAttribute("hidden")),1==t.$stepper.hasClass("--nostepmin")&&t.$container.removeAttribute("tabindex")):(0==t.$stepper.hasClass("--notext")&&(t.$stepper.removeAttribute("aria-hidden"),t.$stepmin.setAttribute("hidden","true")),1==t.$stepper.hasClass("--nostepmin")&&0==t.$stepper.hasClass("--tabindex")&&t.$container.setAttribute("tabindex","-1"))}return t.init=function(t){var e,i,n=this,a=(t="object"!=typeof t?{}:t).element,s=t.target;if(void 0===a&&(a=document.getElementById(s)),this.heading=t.heading,this.$container=c.$(a),this.$container.hasAttribute("tabindex")&&this.$container.addClass("--tabindex"),this.$stepper=this.$container.find(".tb-stepper"),this.media="",this.$stepper.hasClass("--tiny")&&(this.media="--tiny"),this.$stepper.hasClass("--small")&&(this.media="--small"),this.$stepper.hasClass("--force")&&(this.media="--force"),!1===n.$stepper.hasClass("--notext")){if(this.$stepmin=this.$container.find(".tb-stepmin"),this.$stepmin.length<=0){for(var r=this.$stepper.find("li"),o=1,d="",l=0;l<r.length;l++)!0===r[l].hasClass("--current")&&(o=l+1,d=c.$(r[l]).find("> span:last-child").get(0).innerText);s=n,t=o,a=d,e=r.length,!1===s.$stepper.hasClass("--nostepmin")&&(i="",i+='<p class="tb-stepmin" hidden',void 0!==s.heading&&(i+=' role="heading" aria-level="'+s.heading+'"'),s.$container.prepend(i=(i=i+">"+('    <span class="--steptext">'+a+"</span>"))+('    <span class="visually-hidden">, étape '+t+" sur "+e+", en cours</span>")+"</p>"))}this.$stepmin=this.$container.find(".tb-stepmin")}this.$container.setAttribute("data-tb-media",""),u(n),window.addEventListener("resize",function(){u(n)})},t}});